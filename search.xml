<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Golang 78 èªæ³•ç¯‡ - interface</title>
    <url>/2020/07/03/golang78syntax/</url>
    <content><![CDATA[<p>Interface å¯ä»¥èªªæ˜¯ golang çš„ç²¾é«“ä¹‹ä¸€ã€‚golang interface ç‰¹æ®Šçš„èªæ³•ä»¥åŠæ¦‚å¿µä¹Ÿæ˜¯å·¥ç¨‹å¸«å¸¸å¸¸çŠ¯éŒ¯çš„åœ°æ–¹ã€‚æ­¤é¡Œåªæ˜¯ç”¨ä¾†é‡æ¸…è‡ªå·±çš„æ¦‚å¿µã€‚</p>
<h1 id="é¡Œç›®"><a href="#é¡Œç›®" class="headerlink" title="é¡Œç›®"></a>é¡Œç›®</h1><p>è«‹å•ä»¥ä¸‹ç¨‹å¼è¼¸å‡ºçµæœç‚ºä½•</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> S <span class="keyword">struct</span>&#123;</span><br><span class="line">    val <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s S)</span> <span class="title">F</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IF <span class="keyword">interface</span> &#123;</span><br><span class="line">	F()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitType</span><span class="params">()</span> <span class="title">S</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitPointer</span><span class="params">()</span> *<span class="title">S</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s *S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitEfaceType</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">	<span class="keyword">var</span> s S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitEfacePointer</span><span class="params">()</span> <span class="title">interface</span></span>&#123;&#125; &#123;</span><br><span class="line">	<span class="keyword">var</span> s *S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitIfaceType</span><span class="params">()</span> <span class="title">IF</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitIfacePointer</span><span class="params">()</span> <span class="title">IF</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s *S</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// fmt.Println(InitType() == nil) // type mismatch</span></span><br><span class="line">	fmt.Println(InitPointer() == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Println(InitEfaceType() == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Println(InitEfacePointer() == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Println(InitIfaceType() == <span class="literal">nil</span>)</span><br><span class="line">	fmt.Println(InitIfacePointer() == <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 <a id="more"></a>

<h1 id="å›æ­¸åŸºæœ¬"><a href="#å›æ­¸åŸºæœ¬" class="headerlink" title="å›æ­¸åŸºæœ¬"></a>å›æ­¸åŸºæœ¬</h1><p>åœ¨å›ç­”å•é¡Œä¹‹å‰å…ˆè¤‡ç¿’ä»€éº¼æ˜¯ <code>Interface Satisfaction</code> å’Œ <code>Interface Values</code> ï¼Œåˆ†åˆ¥åœ¨ The Go Programming Language ç« ç¯€ 7.3 å’Œ 7.5ã€‚</p>
<h2 id="Interface-Satisfaction"><a href="#Interface-Satisfaction" class="headerlink" title="Interface Satisfaction"></a>Interface Satisfaction</h2><p>ç›´æ¥çµ¦å‡ºæ›¸ä¸Šçš„è§£é‡‹ï¼Œé€™å…©æ®µå¥å­åŠç¯„ä¾‹ç¨‹å¼å·²ç¶“æ·ºé¡¯æ˜“æ‡‚ï¼Œä¸å¤šä½œè§£é‡‹:</p>
<p>A type <code>satisfies</code> an interface if it possesses all the methods the interface requires.</p>
<p>The assignability rule for interfaces is very simple: an expression may be assigned to an interface only if its type satisfies the interface.</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">package io</span></span><br><span class="line"><span class="comment">type Writer interface &#123;</span></span><br><span class="line"><span class="comment">    Write(p []byte) (n int, err error)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> w io.Writer</span><br><span class="line">w = os.Stdout           <span class="comment">// OK: *os.File has Write method</span></span><br><span class="line">w = <span class="built_in">new</span>(bytes.Buffer)   <span class="comment">// OK: *bytes.Buffer has Write method</span></span><br><span class="line">w = time.Second         <span class="comment">// compile error: time.Duration lacks Write method</span></span><br></pre></td></tr></table></figure>

<h2 id="Interface-Values"><a href="#Interface-Values" class="headerlink" title="Interface Values"></a>Interface Values</h2><p>The Go Programming Language 7.5 ç¬¬ä¸€å¥é–‹é–€è¦‹å±±åœ°é¦¬ä¸Šçµ¦å‡ºæ¦‚å¿µ:</p>
<p>Conceptually, a value of an interface type, or <code>interface value</code> has two components, a concrete type and a value of that type . These are called the interfaceâ€™s <code>dynamic type</code> and <code>dynamic value</code>.</p>
<p>ä¸¦ä¸”ç”¨ä¸€å€‹ä¾‹å­åšå‡ºäº†å¾ˆæ£’çš„è§£é‡‹:</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> w io.writer</span><br><span class="line">w = os.Stdout</span><br><span class="line">w = <span class="built_in">new</span>(bytes.Buffer)</span><br><span class="line">w = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<img data-src="/2020/07/03/golang78syntax/golang78syntax_1.jpg" class="" title="line1 - line4">

<p>å¦ä¸€å€‹ä¾‹å­:</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> w io.Writer</span><br><span class="line"><span class="keyword">var</span> buf *bytes.Buffer</span><br><span class="line">w = buf</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%v %T\n"</span>, w, w) <span class="comment">// &lt;nil&gt;  *bytes.Buffer</span></span><br><span class="line"><span class="keyword">if</span> w != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"w not nil"</span>) <span class="comment">// This line will be executed</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‹¥ <code>w != nil</code> è¦æˆç«‹å‰‡ <code>dynamic type</code> å’Œ <code>dynamic value</code> çš†ç‚º <code>non-nil</code> æ‰æœƒæˆç«‹ã€‚<br>å› ç‚º w çš„ dynamic value æ˜¯ <code>*bytes.Buffer</code> ä¸ç‚º <code>nil</code> æ‰€ä»¥ <code>w != nil</code> å°±æœƒæˆç«‹ã€‚</p>
<img data-src="/2020/07/03/golang78syntax/golang78syntax_2.jpg" class="">

<h1 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h1><p>é¡Œç›®çš„ Line 43, 44 é›£åº¦ä¸é«˜ï¼Œç›´æ¥è·³é<br>å‰©ä¸‹çš„çœ‹ä¸‹åœ–</p>
<img data-src="/2020/07/03/golang78syntax/golang78syntax_3.jpg" class="">

<p>Line 50 ç‰½æ‰¯åˆ°äº† <code>method set</code> çš„ç´°ç¯€ï¼Œç•™è‘—ä¸‹ç¯‡è§£é‡‹ï¼Œå¯ä»¥åƒè€ƒ Reference 1, 2</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol>
<li><a href="https://golang.org/ref/spec#Method_sets" target="_blank" rel="noopener">https://golang.org/ref/spec#Method_sets</a></li>
<li><a href="https://stackoverflow.com/questions/33587227/method-sets-pointer-vs-value-receiver" target="_blank" rel="noopener">https://stackoverflow.com/questions/33587227/method-sets-pointer-vs-value-receiver</a></li>
</ol>
]]></content>
      <categories>
        <category>golang78 syntax series</category>
      </categories>
      <tags>
        <tag>golang</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang é–‹ç™¼ç’°å¢ƒ - ä½¿ç”¨ neovim</title>
    <url>/2020/09/03/go_neovim_env/</url>
    <content><![CDATA[<img data-src="/2020/09/03/go_neovim_env/cover.png" class="">

<h1 id="ä½ ç¢ºå®šè¦ç”¨-neovim-é–‹ç™¼-golang"><a href="#ä½ ç¢ºå®šè¦ç”¨-neovim-é–‹ç™¼-golang" class="headerlink" title="ä½ ç¢ºå®šè¦ç”¨ neovim é–‹ç™¼ golang?"></a>ä½ ç¢ºå®šè¦ç”¨ neovim é–‹ç™¼ golang?</h1><p>ç¾åœ¨æ˜¯ vscode ç¨±éœ¸å¤©ä¸‹çš„æ™‚ä»£ï¼Œç†æ‰€ç•¶ç„¶çš„ (neo)vim ä¹Ÿå¸¸å¸¸è¢«æ‹¿ä¾† vscode æ¯”è¼ƒï¼Œvscode å…§å»ºæ•´åˆäº† gitã€debuggerã€è‡ªå‹•è£œå…¨å¼•æ“ã€terminalã€extension managerï¼Œå¦å¤– Golang åœ¨ vscode ä¸Šçš„ extension æ”¯æ´ç›¸ç•¶è‰¯å¥½: åŒ…æ‹¬è·³è½‰åˆ°å®šç¾© (go to definition)ã€é‡æ–°å‘½å (rename)ã€è·³è½‰åˆ°å‹æ…‹å®šç¾© (go to type definition)â‹¯â‹¯ ä¸€å †ç´°ç¯€åŠŸèƒ½ï¼Œè¿‘æœŸç”±æ–¼ google golang team æ¥æ‰‹ go èªè¨€çš„ vscode extensionï¼Œç›¸ä¿¡ä½¿ç”¨ vscode é–‹ç™¼æ˜¯ä¸éŒ¯çš„é¸æ“‡ã€‚</p>
<p> (neo)vim ç•¶ç„¶ä¹Ÿèƒ½é”åˆ° vscode çš„é¡ä¼¼åŠŸèƒ½ï¼Œä½†æ˜¯å¿…é ˆèŠ±æ™‚é–“è¨­å®šèª¿æ•™ï¼Œåœ¨ vscode å•ä¸–ä¹‹å‰æˆ‘æœƒæ¨è–¦ (Neo)vim çµ¦æˆ‘çš„æœ‹å‹ï¼Œvscode å•ä¸–ä¹‹å¾Œæˆ‘å°±é–‹å§‹æ¨è–¦ vscodeã€‚</p>
<blockquote>
<p>æœ¬æ–‡çµ¦é‚£äº›æœ¬ä¾†å°±åœ¨ (neo)vim è£¡æ‰“æ»¾çš„äººï¼Œä½†å° go èªè¨€è¨­å®šä¸ç†Ÿçš„äººï¼Œ<br>å¦‚æœä½ æ˜¯ä¸€å¼µç™½ç´™ï¼Œè€Œä¸”æ²’æœ‰è¢«è™çš„ç™–å¥½ï¼Œæˆ‘å»ºè­°é¸æ“‡ vscodeï¼Œå¯ä»¥ç”¨è¼ƒå°‘çš„æ™‚é–“é€²å…¥åˆ°å¯«ç¨‹å¼çš„ç’°ç¯€ï¼Œè€Œä¸æ˜¯ä¸€ç›´åœ¨èŠ±æ™‚é–“åœ¨è¨­å®šï¼Œé€™ç¯‡æ–‡ä½ ä¹Ÿæ²’å¿…è¦çœ‹ä¸‹å»ã€‚</p>
</blockquote>
<h1 id="é å‚™å‹•ä½œ"><a href="#é å‚™å‹•ä½œ" class="headerlink" title="é å‚™å‹•ä½œ"></a>é å‚™å‹•ä½œ</h1><p>Must have</p>
<ul>
<li>ä½ æ‡‰è©²å…ˆå®‰è£å¥½ neovim nightly ç‰ˆæœ¬ï¼Œ<code>brew install neovim --HEAD</code></li>
<li>ä½ æ‡‰è©²è¦çŸ¥é“æ€éº¼ä½¿ç”¨ vim-plugï¼Œè‡³å°‘è¦çŸ¥é“ <code>:PlugInstall</code></li>
<li>ä½ æ‡‰è©²å…ˆæŠŠ go èªè¨€ç’°å¢ƒå®‰è£å¥½</li>
</ul>
<p>Nice to have</p>
<ul>
<li>ä½ çŸ¥é“ <code>:checkhealth</code> å’Œ <code>:UpdateRemotePlugin</code></li>
<li>ä½ ç†Ÿæ‚‰ <code>:help</code> çš„ä½¿ç”¨æ–¹å¼ï¼Œé€™è£¡æœ‰ä¸€ç¯‡å¥½æ–‡ï¼š<a href="https://vim.fandom.com/wiki/Learn_to_use_help" target="_blank" rel="noopener">Learn to use help</a></li>
</ul>
<h1 id="é–‹ç™¼ç’°å¢ƒåŸºæœ¬åŠŸèƒ½"><a href="#é–‹ç™¼ç’°å¢ƒåŸºæœ¬åŠŸèƒ½" class="headerlink" title="é–‹ç™¼ç’°å¢ƒåŸºæœ¬åŠŸèƒ½"></a>é–‹ç™¼ç’°å¢ƒåŸºæœ¬åŠŸèƒ½</h1><p>ä¸€å€‹å¥½ç”¨çš„ Editor æˆ‘èªç‚ºæ‡‰è©²åŒ…å«ä»¥ä¸‹å¹¾é»åŸºæœ¬åŠŸèƒ½:</p>
<ul>
<li>Auto completion - å¥½çš„è‡ªå‹•è£œå…¨å¼•æ“</li>
<li>File manager - å¯ä»¥åœ¨å´é‚Šæ¬„çœ‹åˆ°å°ˆæ¡ˆçš„çµæ§‹</li>
<li>Real time linter - åœ¨å¯« code çŠ¯éŒ¯çš„åŒæ™‚ï¼Œæœ‰ä¸€äº›æç¤º (ä¹Ÿå°±æ˜¯ diagnostic åŠŸèƒ½)</li>
<li>Background compile - ç·¨è­¯çš„åŒæ™‚ä¸æ‡‰è©²å¡ä½æ•´å€‹ Editorï¼Œè¦è®“ä½¿ç”¨è€…èƒ½åšå…¶ä»–äº‹æƒ…</li>
<li>Code navigation: åŒ…å«è·³è½‰åˆ°å®šç¾©ï¼Œè·³è½‰åˆ°å‹æ…‹å®šç¾©ï¼Œæˆ–æ˜¯ç•¶ä¸€å€‹æª”æ¡ˆå¯«å¾—å¾ˆé•·çš„æ™‚å€™ï¼Œæ€éº¼ç¶œè§€å…¨å±€</li>
</ul>
<p>ä»¥ä¸‹æˆ‘å°‡æœƒä»‹ç´¹æˆ‘ä½¿ç”¨çš„ Pluginï¼Œé”åˆ°æˆ‘ä¸Šè¿°æ‰€æåˆ°çš„åŠŸèƒ½ã€‚<br>ä»¥ä¸‹ä½¿ç”¨çš„çš†æ˜¯ Neovim nightly ç‰ˆæœ¬ï¼Œä½¿ç”¨ stable æ˜¯æ²’æœ‰å®˜æ–¹ LSP æ”¯æ´çš„ã€‚</p>
<p>Noteï¼šneovim æ˜¯ç”± vim æ‰€ fork å‡ºä¾†çš„ï¼Œå·®ç•°ä»‹ç´¹è«‹çœ‹<a href="https://kerol2r20.github.io/post/2017-10-29-neovim-introdunction/" target="_blank" rel="noopener">é€™ç¯‡</a>ï¼ŒæŸäº› Plugin ä¸æœƒåŒæ™‚ç›¸å®¹æ–¼å…©è€…ï¼Œæˆ‘æ¥æœƒæ¨™æ˜ã€‚</p>
 <a id="more"></a>

<h1 id="File-explorer-defx-nvim"><a href="#File-explorer-defx-nvim" class="headerlink" title="File explorer (defx.nvim)"></a>File explorer (defx.nvim)</h1><img data-src="/2020/09/03/go_neovim_env/defx.png" class="">

<p>ç‚ºä»€éº¼ä¸ç”¨è€ç‰Œçš„ nerdtree å°±å¥½ï¼Œè¦ä½¿ç”¨åˆ¥çš„ file explorerï¼Œ<br>æ²’è¾¦æ³• nerdtree å°±æ˜¯æ…¢ï¼Œåªè¦å°ˆæ¡ˆç¨å¾®æœ‰ä¸€é»è¦æ¨¡ï¼Œå°±æœƒæœ‰æ˜é¡¯çš„å¡é “ã€‚</p>
<p>defx ç”± python3 å¯«æˆï¼Œæ˜¯ä¸€å€‹éœ€è¦é«˜åº¦æ‰‹å‹•è¨­å®šçš„ file explorerï¼Œä¸åƒ nerdtree å¹¾ä¹å¯ä»¥é–‹ç®±åŠç”¨ï¼Œåœ¨è¨­å®šæ™‚ä¸€å®šå¾—æŸ¥çœ‹ defx çš„ help æ–‡ä»¶ï¼Œè£¡é ­æœ‰ç›¸ç•¶å¤šè¨­å®šç¯„ä¾‹ã€‚</p>
<p>ç‚ºäº†è®“ neovim çŸ¥é“ python3 åœ¨å“ªï¼Œå°‡æ­¤è¡Œå¯«å…¥ vimrcï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:python3_host_prog</span> = <span class="string">'/path/to/python3'</span></span><br></pre></td></tr></table></figure>
<p>è¨­å®šå®Œæ­¤è¡Œä¹‹è¡Œ åŸ·è¡Œ <code>:checkhealth</code>ï¼Œneovim å°±æœƒé–‹å§‹æŸ¥çœ‹æœ‰æ²’æœ‰æŠ“åˆ° python3</p>
<p>å®‰è£</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'Shougo/defx.nvim'</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£å®Œå¾ŒåŸ·è¡Œ <code>:UpdateRemotePlugins</code></p>
<p>ä½¿ç”¨ F4 æ˜ å°„åˆ° defx</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;F4&gt;</span> <span class="symbol">&lt;cmd&gt;</span>Defx -<span class="keyword">buffer</span>-name=<span class="string">"defx"</span><span class="symbol">&lt;cr&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¤–è§€è¨­å®š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">call</span> defx#custom#column(<span class="string">'icon'</span>, &#123;</span><br><span class="line">            \ <span class="string">'directory_icon'</span>: <span class="string">'â–¸'</span>,</span><br><span class="line">            \ <span class="string">'opened_icon'</span>: <span class="string">'â–¾'</span>,</span><br><span class="line">            \ <span class="string">'root_icon'</span>: <span class="string">'ğŸ“ '</span>,</span><br><span class="line">            \ &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> defx#custom#column(<span class="string">'filename'</span>, &#123;</span><br><span class="line">            \ <span class="string">'min_width'</span>: <span class="number">128</span>,</span><br><span class="line">            \ <span class="string">'max_width'</span>: <span class="number">128</span>,</span><br><span class="line">            \ &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> defx#custom#option(<span class="string">'_'</span>, &#123;</span><br><span class="line">            \ <span class="string">'columns'</span>: <span class="string">'mark:indent:icon:filename:type'</span>,</span><br><span class="line">            \ <span class="string">'split'</span>: <span class="string">'vertical'</span>,</span><br><span class="line">            \ <span class="string">'winwidth'</span>: <span class="number">35</span>,</span><br><span class="line">            \ <span class="string">'direction'</span>: <span class="string">'topleft'</span>,</span><br><span class="line">            \ <span class="string">'resume'</span>: <span class="variable">v:false</span>,</span><br><span class="line">            \ <span class="string">'toggle'</span>: <span class="variable">v:true</span></span><br><span class="line">            \ &#125;)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ enter æ‰“é–‹æˆ–é—œé–‰è³‡æ–™å¤¾ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;buffer&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;CR&gt;</span></span><br><span class="line">            \ defx#is_directory() ?</span><br><span class="line">            \ defx#do_action(<span class="string">'open_or_close_tree'</span>) :</span><br><span class="line">            \ defx#do_action(<span class="string">'drop'</span>)</span><br></pre></td></tr></table></figure>


<p>å› ç‚º defx çš„é«˜åº¦å½ˆæ€§ï¼Œä»¥åŠèˆŠæœ‰çš„ nerdtreeä½¿ç”¨ç¿’æ…£ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠ defx çš„ key mapping è¨­å®šæˆé¡ä¼¼ nerdtreeï¼Œé€™è£¡å°±åªåšåŸºæœ¬è¨­å®šï¼Œä»¥å¾Œæœ‰ç©ºæœƒå¤šé–‹ä¸€ç¯‡è©³ç´°è¬› defx è¨­å®šï¼Œå¦‚æœæœ‰èˆˆè¶£è«‹åƒè€ƒ<a href="https://github.com/amikai/nvimrc/blob/46d4c73f9e/config/defx.vim" target="_blank" rel="noopener">æˆ‘çš„è¨­å®š</a> </p>
<p>Note: defx (neovim only)</p>
<p>é¡ä¼¼ Plugin: <a href="https://github.com/preservim/nerdtree" target="_blank" rel="noopener">nerdtree</a> (vim and neovim), <a href="https://github.com/justinmk/vim-dirvish" target="_blank" rel="noopener">vim-dirvish</a> (vim and neovim)</p>
<h1 id="Auto-completion-completion-nvim-amp-diagnostic-diagnostic-nvim"><a href="#Auto-completion-completion-nvim-amp-diagnostic-diagnostic-nvim" class="headerlink" title="Auto completion (completion-nvim) &amp; diagnostic (diagnostic-nvim)"></a>Auto completion (completion-nvim) &amp; diagnostic (diagnostic-nvim)</h1><p>completion-nvim å’Œ diagnostic-nvim éƒ½æ˜¯åŸºæ–¼ nvim-lspconfig çš„ Pluginï¼Œ<br>å¯ä»¥æŠŠ nvim-lspconfig ç•¶æˆå’Œ language server æºé€šçš„åŸºç¤è¨­æ–½ï¼ŒGolang é è¨­çš„ language server ç•¶ç„¶å°±æ˜¯ gopls å•¦</p>
<p>å®‰è£</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'neovim/nvim-lspconfig'</span></span><br><span class="line">Plug <span class="string">'nvim-lua/diagnostic-nvim'</span></span><br><span class="line">Plug <span class="string">'nvim-lua/completion-nvim'</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ lsp client æ™‚ï¼Œå•Ÿå‹• <code>completion-nvim</code> å’Œ <code>diagnostic-nvim</code>ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua &lt;&lt; EOF</span><br><span class="line">    <span class="keyword">local</span> nvim_lsp = <span class="built_in">require</span><span class="string">'nvim_lsp'</span></span><br><span class="line">    <span class="keyword">local</span> on_attach_vim = <span class="function"><span class="keyword">function</span><span class="params">(client, bufnr)</span></span></span><br><span class="line">        <span class="built_in">require</span><span class="string">'completion'</span>.on_attach(client, bufnr)</span><br><span class="line">        <span class="built_in">require</span><span class="string">'diagnostic'</span>.on_attach(client, bufnr)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    nvim_lsp.gopls.setup&#123;</span><br><span class="line">        on_attach=on_attach_vim</span><br><span class="line">    &#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><code>diagnostic-nvim</code> ç¯„ä¾‹è¨­å®šï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">call</span> sign_define(<span class="string">"LspDiagnosticsErrorSign"</span>, &#123;<span class="string">"text"</span> : <span class="string">"E"</span>, <span class="string">"texthl"</span> : <span class="string">"LspDiagnosticsError"</span>&#125;)</span><br><span class="line"><span class="keyword">call</span> sign_define(<span class="string">"LspDiagnosticsWarningSign"</span>, &#123;<span class="string">"text"</span> : <span class="string">"W"</span>, <span class="string">"texthl"</span> : <span class="string">"LspDiagnosticsWarning"</span>&#125;)</span><br><span class="line"><span class="keyword">call</span> sign_define(<span class="string">"LspDiagnosticsInformationSign"</span>, &#123;<span class="string">"text"</span> : <span class="string">"I"</span>, <span class="string">"texthl"</span> : <span class="string">"LspDiagnosticsInformation"</span>&#125;)</span><br><span class="line"><span class="keyword">call</span> sign_define(<span class="string">"LspDiagnosticsHintSign"</span>, &#123;<span class="string">"text"</span> : <span class="string">"H"</span>, <span class="string">"texthl"</span> : <span class="string">"LspDiagnosticsHint"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:diagnostic_show_sign</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:diagnostic_enable_virtual_text</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:diagnostic_insert_delay</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:diagnostic_virtual_text_prefix</span> = <span class="string">'&lt;'</span></span><br></pre></td></tr></table></figure>
<p>æ•ˆæœï¼š</p>
<img data-src="/2020/09/03/go_neovim_env/diagnostic_demo.gif" class="">

<p>å¦‚æœè¦ºå¾—å­—é‚„æ²’æ‰“å®Œå°±æœ‰è­¦å‘Šå¾ˆç…©ï¼Œå¯ä»¥æ”¹è®Šæ­¤é¸é … <code>let g:diagnostic_insert_delay = 1</code>ï¼Œå‰‡æœƒåœ¨é€²å…¥ normal mode æ™‚é€²è¡Œè­¦å‘Šã€‚</p>
<p><code>completion-nvim</code> ç¯„ä¾‹è¨­å®šï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:completion_chain_complete_list</span> = [</span><br><span class="line">            \&#123;<span class="string">'complete_items'</span>: [<span class="string">'lsp'</span>]&#125;,</span><br><span class="line">            \]</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœ</p>
<img data-src="/2020/09/03/go_neovim_env/completion_demo.gif" class="">

<p>Note: <code>nvim-lspconfig</code>, <code>completion-nvim</code>, <code>diagnostic-nvim</code> çš†ä¸ç›¸å®¹ vim</p>
<p>LSP ç›¸é—œ Pluginï¼š <a href="https://github.com/prabirshrestha/vim-lsp" target="_blank" rel="noopener">vim-lsp</a> (vim only), <a href="https://github.com/autozimu/LanguageClient-neovim" target="_blank" rel="noopener">LanguageClient-neovim</a> (neovim only)</p>
<p>Completion ç›¸é—œ Pluginï¼š <a href="https://github.com/ncm2/ncm2" target="_blank" rel="noopener">ncm2</a> (vim8 and neovim), <a href="https://github.com/Shougo/deoplete.nvim" target="_blank" rel="noopener">deoplete.nvim</a> (vim8 and neovim)</p>
<p>Diagnostic ç›¸é—œ Plugin: <a href="https://github.com/neomake/neomake" target="_blank" rel="noopener">neomake</a> (neovim and vim8), <a href="https://github.com/dense-analysis/ale" target="_blank" rel="noopener">ale</a> (neovim and vim8)</p>
<blockquote>
<p>çœ‹äº† completion-nvim çš„ contribution å¤§éƒ¨åˆ†æ˜¯ç”± haorenW1025 å¤§å¤§æ‰€å¯«ï¼Œå¸³è™Ÿæ› NTUï¼Œå°ç£äººå¯«çš„å¥—ä»¶é‚„ä¸æ”¯æŒä¸€æ³¢</p>
</blockquote>
<h1 id="Code-Outline-tagbar"><a href="#Code-Outline-tagbar" class="headerlink" title="Code Outline (tagbar)"></a>Code Outline (tagbar)</h1><img data-src="/2020/09/03/go_neovim_env/tagbar_demo.png" class="">

<p>ç•¶ code è¶Šå¯«è¶Šå¤šï¼Œä¸€å€‹ file è¶Šé•·è¶Šå¤§ï¼Œä¸€å€‹ file è¶…é 1000 è¡Œï¼Œæˆ–è¶…é 15 å€‹ functionï¼Œå°±éœ€è¦ä¸€å€‹ç¶œè§€å…¨å±€çš„ Pluginï¼Œé€™ç•¶ç„¶å°±éœ€è¦äº¤çµ¦ <code>tagbar</code> äº†ã€‚</p>
<p>å¦å¤–ä¸€ç¨®æƒ…å¢ƒï¼Œç•¶ä½ ä¸ç†Ÿä½ æ‰‹ä¸Šçš„é€™ä»½å°ˆæ¡ˆæ™‚ï¼Œç”¨ <code>tagbar</code> å…ˆé€²è¡Œå¤§ç¶±å¼çš„è§€å¯Ÿï¼Œæ˜¯å†å¥½ä¸éçš„æ–¹å¼äº†</p>
<p>é¦–å…ˆå…ˆå®‰è£ <a href="https://github.com/jstemmer/gotags" target="_blank" rel="noopener">gotags</a>, gotags åœ¨ Readme ä¸Šéƒ½å¯«å¥½æ€éº¼è¨­å®šäº†ã€‚</p>
<p>å®‰è£ Tagbar:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'majutsushi/tagbar'</span></span><br></pre></td></tr></table></figure>
<p>gotags åŠ tagbar è¨­å®šï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:tagbar_type_go</span> = &#123;</span><br><span class="line">            \ <span class="string">'ctagstype'</span> : <span class="string">'go'</span>,</span><br><span class="line">            \ <span class="string">'kinds'</span>     : [</span><br><span class="line">            \ <span class="string">'p:package'</span>,</span><br><span class="line">            \ <span class="string">'i:imports:1'</span>,</span><br><span class="line">            \ <span class="string">'c:constants'</span>,</span><br><span class="line">            \ <span class="string">'v:variables'</span>,</span><br><span class="line">            \ <span class="string">'t:types'</span>,</span><br><span class="line">            \ <span class="string">'n:interfaces'</span>,</span><br><span class="line">            \ <span class="string">'w:fields'</span>,</span><br><span class="line">            \ <span class="string">'e:embedded'</span>,</span><br><span class="line">            \ <span class="string">'m:methods'</span>,</span><br><span class="line">            \ <span class="string">'r:constructor'</span>,</span><br><span class="line">            \ <span class="string">'f:functions'</span></span><br><span class="line">            \ ],</span><br><span class="line">            \ <span class="string">'sro'</span> : <span class="string">'.'</span>,</span><br><span class="line">            \ <span class="string">'kind2scope'</span> : &#123;</span><br><span class="line">            \ <span class="string">'t'</span> : <span class="string">'ctype'</span>,</span><br><span class="line">            \ <span class="string">'n'</span> : <span class="string">'ntype'</span></span><br><span class="line">            \ &#125;,</span><br><span class="line">            \ <span class="string">'scope2kind'</span> : &#123;</span><br><span class="line">            \ <span class="string">'ctype'</span> : <span class="string">'t'</span>,</span><br><span class="line">            \ <span class="string">'ntype'</span> : <span class="string">'n'</span></span><br><span class="line">            \ &#125;,</span><br><span class="line">            \ <span class="string">'ctagsbin'</span>  : <span class="string">'gotags'</span>,</span><br><span class="line">            \ <span class="string">'ctagsargs'</span> : <span class="string">'-sort -silent'</span></span><br><span class="line">            \ &#125;</span><br></pre></td></tr></table></figure>


<h1 id="Go-development-plugin-vim-go"><a href="#Go-development-plugin-vim-go" class="headerlink" title="Go development plugin (vim-go)"></a>Go development plugin (vim-go)</h1><p>Golang åœ¨ vim çš„é–‹ç™¼ä¸­ï¼Œä¸å¯èƒ½ä¸æ <code>vim-go</code> äº†ï¼Œæ‡‰è©²ä¹Ÿæ˜¯æˆ‘åœ¨ vim plugin çœ‹éæ”¯æ´å®Œæ•´çš„é–‹ç™¼å·¥å…·ä¹‹ä¸€äº†ï¼Œvim-go è¨­å®šçœ¾å¤šï¼Œæˆ‘åªæŒ‘å‡ºäº†æˆ‘è¦ºå¾—æœ€æœ‰ç”¨çš„å¹¾å€‹å‡ºä¾†è«‡ã€‚</p>
<p>å®‰è£</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'fatih/vim-go'</span>,&#123;<span class="string">'for'</span>:<span class="string">'go'</span>, <span class="string">'do'</span>: <span class="string">':GoUpdateBinaries'</span>&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/golangci/golangci-lint" target="_blank" rel="noopener">golangci-lint</a> æ˜¯æŠŠä¸ä¸€æ¨£çš„ go èªè¨€ linter é›†åˆèµ·ä¾†æˆä¸€åŒ…ï¼Œåœ¨ teminal æ‰“ <code>golangci-lint linters</code> å°±æœƒåˆ—å‡ºä¸€å † linterï¼ŒæŒ‘é¸è‡ªå·±æƒ³è¦çš„ linter æ”¾å…¥ <code>g:go_metalinter_enabled</code> é™£åˆ—è£¡ã€‚</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:go_metalinter_command</span> = <span class="string">"golangci-lint"</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_metalinter_enabled</span> = [<span class="string">'vet'</span>, <span class="string">'errcheck'</span>, <span class="string">'staticcheck'</span>, <span class="string">'gosimple'</span>]</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>:GoMetaLinter</code> é–‹å§‹å°å°ˆæ¡ˆé€²è¡Œæª¢æŸ¥ã€‚</p>
<p>ç•¶ç„¶ code è¶Šå¤§æˆ–æ˜¯ linter æ”¾å¾—è¶Šå¤šæª¢æŸ¥è¶Šæ…¢ï¼Œæ‰€ä»¥æˆ‘é€šå¸¸å¯«åˆ°ä¸€å€‹æ®µè½æ‰ä¸‹æ­¤å‘½ä»¤ï¼Œlinter æª¢æŸ¥å®Œå¾Œ quickfix list å‰‡æœƒè·³å‡ºï¼Œè«‹çœ‹demoï¼š</p>
<img data-src="/2020/09/03/go_neovim_env/golangci_lint_demo.gif" class="">

<p>code navigation è¨­å®šï¼Œä¸ä½¿ç”¨ <code>vim-go</code> é è¨­çš„ key mappingï¼Œä½¿ç”¨è‡ªå·±ç¿’æ…£çš„æ–¹å¼ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:go_def_mapping_enabled</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> gd <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-def)</span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> gD <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-describe)</span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> gR <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-<span class="built_in">rename</span>)</span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> <span class="keyword">gr</span> <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-referrers)</span><br></pre></td></tr></table></figure>

<p>æœ€å±Œçš„æ˜¯ vim-go èƒ½ç›´æ¥è·‘ Testing (<code>:GoTest</code>), Debugger (<code>:GoDebugStart</code>), Run (<code>:GoRun</code>), Build (<code>:GoBuild</code>)</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> <span class="symbol">&lt;f4&gt;</span> <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-test)</span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> <span class="symbol">&lt;f5&gt;</span> <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-build)</span><br><span class="line"><span class="keyword">autocmd</span> Filetype <span class="keyword">go</span> <span class="keyword">nmap</span> <span class="symbol">&lt;buffer&gt;</span> <span class="symbol">&lt;f6&gt;</span> <span class="symbol">&lt;Plug&gt;</span>(<span class="keyword">go</span>-run)</span><br></pre></td></tr></table></figure>

<p><code>:GoTest</code> demoï¼š</p>
<img data-src="/2020/09/03/go_neovim_env/go_test_demo.gif" class="">

<p>vim-go è¨­å®šä¸€å®šè¦çœ‹é <a href="https://github.com/fatih/vim-go-tutorial" target="_blank" rel="noopener">vim-go-tutorial</a>ï¼Œç”± vim-go ä½œè€…æä¾›çš„è¨­å®šæ•™å­¸ã€‚</p>
<h1 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h1><p>å¦‚æœè¦ä¸€å€‹é©åˆè‡ªå·±çš„ (neo)vim ç’°å¢ƒï¼Œç•¶ç„¶é€™ç¯‡æ–‡ç« åªæ˜¯å†°å±±ä¸€è§’è€Œå·²ã€‚é€™è£¡æåˆ°çš„ Pluginï¼Œæ¯ä¸€å€‹éƒ½å¯ä»¥é–‹ä¸€ç¯‡æ–‡ç« ä¾†ä»‹ç´¹ï¼Œæ‰€ä»¥æ¯ä¸€å€‹ Plugin æˆ‘ç›¡é‡ç”¨æœ€ç°¡å–®çš„ç¯„ä¾‹è¨­å®šï¼Œå±•ç¾å®ƒçš„åŠŸèƒ½å’Œç²¾é«“ã€‚å¦å¤–é‚„æœ‰ fuzzy finder, auto pair, indent line guide, snippet ..ç­‰ Plugin, é‚„æ²’æåˆ°ï¼Œä¹‹å¾Œæœƒåˆ†å¥½å¹¾ç¯‡æ–‡ç« ä¾†å¯«ã€‚</p>
<p>åœ¨é…ç½®è¨­å®šçš„ä¸€é–‹å§‹ï¼Œç›¡é‡å…ˆå»æŠ„åˆ¥äººçš„ï¼Œç›´æ¥çœ‹çœ‹æŠ„äº†è¨­å®šæœƒç™¼ç”Ÿä»€éº¼æ•ˆæœï¼Œ æˆ–æ˜¯ä½¿ç”¨ <code>:help</code> æŸ¥è©¢çœ‹çœ‹ã€‚</p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h1><p>è¦å»å“ªè£¡æŸ¥åˆ°åˆ¥äººçš„ vim è¨­å®šï¼Ÿ<br>åœ¨ github ä¸ŠæŸ¥è©¢é—œéµå­—ï¼šdotfile, dotfiles, vimrc, vim-config, nvimrc ç­‰ç­‰çš„å­—ã€‚<br>é€™è£¡æˆ‘å°±æä¾›å…©å€‹å¤§ç¥çš„ vim è¨­å®šï¼š</p>
<ul>
<li><a href="https://github.com/Shougo/shougo-s-github" target="_blank" rel="noopener">https://github.com/Shougo/shougo-s-github</a></li>
<li><a href="https://github.com/rafi/vim-config" target="_blank" rel="noopener">https://github.com/rafi/vim-config</a></li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://github.com/neovim/nvim-lspconfig" target="_blank" rel="noopener">https://github.com/neovim/nvim-lspconfig</a></li>
<li><a href="https://github.com/fatih/vim-go-tutorial" target="_blank" rel="noopener">https://github.com/fatih/vim-go-tutorial</a></li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
        <tag>neovim</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨ (neo)vim è£¡ C èªè¨€ç¨‹å¼ç¢¼å°è¦½æŠ€å·§</title>
    <url>/2020/11/28/vim-c-env-move/</url>
    <content><![CDATA[<p>ç¾ä»£çš„å°ˆæ¡ˆé–‹ç™¼ï¼Œå¾ˆå°‘åœ¨å¾ç„¡åˆ°æœ‰æ‰“é€ ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åŸºæ–¼ç¾æœ‰çš„ç¨‹å¼ä¹‹ä¸Šç¹¼çºŒé–‹ç™¼æˆ–ç¶­è­·ï¼Œé€²å…¥å°ˆæ¡ˆä¹‹å¾Œï¼Œé€šå¸¸ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å¤§é‡é–±è®€ç¨‹å¼ç¢¼ç†æ¸…å°ˆæ¡ˆçš„æ•´å€‹è„ˆçµ¡ï¼Œæ‰é–‹å§‹è‘—æ‰‹å¯« codeï¼Œæ‰€ä»¥å¥½çš„ç¨‹å¼ç¢¼å°è¦½æŠ€å·§å°‡æœƒå¸¶ä½ ä¸Šå¤©å ‚ã€‚</p>
<p>æˆ‘å°‡å¤§éƒ¨åˆ†çš„ç¨‹å¼ç¢¼å°è¦½æƒ…å¢ƒå¤§è‡´æ‹†æˆäº†ä¸‰ç¨®æƒ…æ³ï¼š</p>
<ul>
<li>åŸºæœ¬çš„è·³è½‰ï¼š<ul>
<li><code>#if</code> <code>#endif</code> ä¸­é–“çš„ç¨‹å¼ç¢¼å¤ªé•·ï¼Œæƒ³è¦è·³è½‰åˆ°æˆå°çš„ <code>#if</code> <code>#endif</code> </li>
<li>cursor åœ¨ {â€¦} block è£¡ï¼Œ é€™å€‹ block åˆè‡­åˆé•·ï¼Œæƒ³å¿«é€Ÿè·³è½‰ block çš„é–‹é ­å’Œçµå°¾</li>
<li>è¨»è§£é•·ç¯‡å¤§è«–ï¼Œæƒ³å¿«é€Ÿè·³åˆ°è¨»è§£çš„é–‹é ­æˆ–çµå°¾</li>
</ul>
</li>
<li>å°‹æ‰¾å°ˆæ¡ˆä¸‹æª”æ¡ˆ (å¯é€éè¨­å®š path option è§£æ±º)<ul>
<li>è·³è½‰åˆ°æ¨™é ­æª”</li>
<li>è·³è½‰åˆ°æŒ‡å®šæª”æ¡ˆ</li>
</ul>
</li>
<li>ä½¿ç”¨ source code tagging system å¿«é€ŸæŒ‘è½‰åˆ° function å®šç¾©åŠç‰¹å®š symbol ç­‰ç­‰ï¼š<br>å°ˆæ¡ˆç›¸ç•¶å¤§çš„æ™‚å€™ï¼Œsource code tagging system ç›¸ç•¶å¥½ç”¨ï¼Œå¯ä»¥å¿«é€Ÿæ‰¾åˆ°å®šä½ï¼Œä¹Ÿä¸æœƒèŠ±æ‰å¤ªå¤šçš„è³‡æºï¼Œæ¯”èµ· LSP çš„è·³è½‰å®šç¾©ï¼Œæ˜¯è¼ƒè¼•é‡çš„é¸æ“‡ã€‚</li>
</ul>
<p>æœ¬ç¯‡ä¾æ“šä¸Šè¿°ä¸‰ç¨®æƒ…å¢ƒï¼Œä¸€ä¸€è¬›è¿°ã€‚<br> <a id="more"></a></p>
<h1 id="å¸¸ç”¨è·³è½‰æ“ä½œ"><a href="#å¸¸ç”¨è·³è½‰æ“ä½œ" class="headerlink" title="å¸¸ç”¨è·³è½‰æ“ä½œ"></a>å¸¸ç”¨è·³è½‰æ“ä½œ</h1><ul>
<li><p><code>%</code></p>
<ul>
<li>è·³åˆ°æˆå°çš„æ‹¬è™Ÿ</li>
<li>å¦‚æœè¨»è§£æ˜¯ <code>/*...*/</code>ï¼Œè·³åˆ°æˆå°çš„è¨»è§£ç¬¦è™Ÿ</li>
<li>åœ¨æˆå°çš„ <code>#if</code>, <code>#ifdef</code>, <code>#else</code>, <code>#elif</code>, <code>#endif</code> ä¹‹ä¸­è·³è½‰ï¼Œé€™ç›¸ç•¶é‡è¦ï¼Œå¦‚æœ code å¾ˆé•·, if else macro åˆæ˜¯å·¢ç‹€çš„ï¼Œé€™æ‹›å¯ä»¥è®“ä½ å°‘è¿·è·¯å¥½å¹¾æ¬¡</li>
</ul>
</li>
<li><p><code>[{</code> <code>]}</code></p>
<ul>
<li><code>[{</code>ï¼šè‹¥ cursor åœ¨ {â€¦} å€å¡Šä¸­ï¼Œè·³åˆ°æ­¤å€å¡Šçš„ {</li>
<li><code>]}</code>ï¼šè‹¥ cursor åœ¨ {â€¦} å€å¡Šä¸­ï¼Œè·³åˆ°æ­¤å€å¡Šçš„ }</li>
</ul>
</li>
<li><p><code>[*</code> <code>]*</code></p>
<ul>
<li><code>[*</code>ï¼šæ‰¾åˆ°ä¸Šä¸€å€‹ /*</li>
<li><code>]*</code>ï¼šæ‰¾åˆ°ä¸‹ä¸€å€‹ */</li>
</ul>
</li>
</ul>
<ul>
<li><p><code>[#</code> <code>]#</code><br>  ç”¨æ³•å’Œ <code>[{</code> <code>]}</code> é¡ä¼¼ï¼Œä½†æ˜¯é‡å°çš„æ˜¯ <code>#</code><br>  åœ¨ line2 å€å¡Š <code>[{</code> è·³åˆ° line1, <code>]}</code> è·³åˆ° line3<br>  åœ¨ line4 å€å¡Š <code>[{</code> è·³åˆ° line3, <code>]}</code> è·³åˆ° line5<br>  åœ¨ line6 å€å¡Š <code>[{</code> è·³åˆ° line5, <code>]}</code> è·³åˆ° line7</p>
  <figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> TEST</span></span><br><span class="line"><span class="comment">// line2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">elif</span> TEST2</span></span><br><span class="line"><span class="comment">// line4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="comment">// line6</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p>  è‹¥ cursor åœ¨ #elseâ€¦#endif å€å¡Šä¸­ï¼Œè·³åˆ° #else</p>
</li>
</ul>
<h1 id="é€é-path-è¨­å®šï¼Œå¿«é€ŸæŸ¥æ‰¾ç›¸é—œæª”æ¡ˆ"><a href="#é€é-path-è¨­å®šï¼Œå¿«é€ŸæŸ¥æ‰¾ç›¸é—œæª”æ¡ˆ" class="headerlink" title="é€é path è¨­å®šï¼Œå¿«é€ŸæŸ¥æ‰¾ç›¸é—œæª”æ¡ˆ"></a>é€é path è¨­å®šï¼Œå¿«é€ŸæŸ¥æ‰¾ç›¸é—œæª”æ¡ˆ</h1><p>çœ‹çœ‹ä»¥ä¸‹åœ–ç‰‡ï¼Œå°‡ cursor ç§»å‹•åˆ°ç¨‹å¼ç¢¼æ¨™é ­æª”çš„ä½ç½® (stdio.h)ï¼ŒæŒ‰ä¸‹ <code>gf</code>ï¼Œbang! ä½ è·³åˆ° stdio.h æ¨™é ­æª”äº†</p>
<img data-src="/2020/11/28/vim-c-env-move/vim_gf.gif" class="">


<p>å†ä¾†çœ‹çœ‹ <code>:find</code> æŒ‡ä»¤ï¼Œæˆ‘æƒ³æ‰¾å‡º stdlib.h æ¨™é ­æª”ï¼Œä½¿ç”¨ <code>:find stdlib.h</code>, å°±è·³åˆ° stdlib.h å•¦</p>
<p>æˆ‘å€‘ä¾†çœ‹çœ‹ vim åˆ°åº•æ€éº¼å¯¦ç¾é€™å€‹é­”æ³•çš„ï¼š<br>å…¶å¯¦ vim æ˜¯è—‰ç”± <code>path</code> é€™å€‹ option å»æœå°‹çš„ (è©³è¦‹ <code>:help &#39;path&#39;</code>)ï¼Œpath é€™å€‹å€¼ç”±è¨±å¤šè·¯å¾‘çµ„æˆä¸¦ç”±é€—è™Ÿéš”é–‹ï¼Œåœ¨ nix ç³»çµ±è£¡ vim å° path é è¨­çš„å€¼æ˜¯ </p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">.,/usr/include,,</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ä¸‰å€‹å€¼ï¼š</p>
<ul>
<li><code>.</code>ï¼š ç•¶å‰æª”æ¡ˆæ‰€åœ¨çš„ç›®éŒ„</li>
<li><code>/usr/include</code>ï¼š å¾ˆé¡¯ç„¶æ‰¾åˆ° <code>gf</code> æ‰¾åˆ°çš„ stdio.h å’Œ <code>:find</code> æ‰¾åˆ°çš„ stdlib.h æ˜¯ç”±é€™å€‹ç›®éŒ„æ‰¾å‡ºä¾†çš„</li>
<li>empty stringï¼šå·¥ä½œç›®éŒ„ (current work directory, é€šå¸¸æ˜¯ vim é–‹å•Ÿçš„ä½ç½®ï¼Œå¦‚æœä½ æ²’ç”¨ <code>:cd</code> çš„è©±)</li>
</ul>
<p>æ‰€ä»¥å¯ä»¥æŠŠè‡ªå·±å¸¸ç”¨çš„æ¨™é ­æª”æ‰€åœ¨ç›®éŒ„åŠ å…¥ path ï¼ èˆ‰å€‹ä¾‹å­ <code>/usr/local/include</code> ä¹Ÿæ˜¯å¾ˆå¸¸æ”¾æ¨™é ­æª”çš„è·¯å¾‘ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒåŠ å…¥åˆ° path</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">set</span> path+=/usr/local/include</span><br></pre></td></tr></table></figure>


<p>è¨»: <code>.</code> å’Œ empty string çš„å·®åˆ¥è«‹çœ‹ï¼š<a href="https://vi.stackexchange.com/questions/5998/is-vims-default-path-option-redundant" target="_blank" rel="noopener">is-vims-default-path-option-redundant</a></p>
<p><code>**</code> ç®—æ˜¯ä¸€å€‹è »å¥½ç”¨çš„å€¼ï¼Œå®ƒæœƒå°è·¯å¾‘åš recursive çš„è§£æï¼Œä½ å¯èƒ½æœƒä½¿ç”¨åˆ°å®ƒï¼Œè©³ç´°çš„è¦å‰‡å¯ä»¥çœ‹ <code>:help starstar</code></p>
<h1 id="Source-code-tagging-system-å’Œ-vim"><a href="#Source-code-tagging-system-å’Œ-vim" class="headerlink" title="Source code tagging system å’Œ vim"></a>Source code tagging system å’Œ vim</h1><p>2020 å¹´ Linux kernel åŸå§‹ç¢¼è¦æ¨¡å·²ç¶“é”åˆ° 2780 è¬è¡Œï¼Œè¦æ¨¡å¦‚æ­¤ä¹‹é¾å¤§ï¼ŒLinux çš„ç¨‹å¼é–‹ç™¼äººå“¡åˆ°åº•æ˜¯æ€éº¼é–‹ç™¼çš„ï¼Œéš¨ä¾¿æƒ³æ‰¾ä¸€å€‹ function å®šç¾©éƒ½ç›¸ç•¶åƒåŠ›ï¼Œç¸½ä¸èƒ½ç”¨ grep æ…¢æ…¢å»æ‰¾å§!é€™æ™‚å€™ source code tagging system å°±æ´¾ä¸Šç”¨å ´äº†ï¼Œå®ƒå¯ä»¥å°å°ˆæ¡ˆæ‰€æœ‰çš„ symbol ç”¢ç”Ÿç´¢å¼•æª”ï¼Œéœ€è¦æŸ¥æ‰¾ç›®æ¨™æ™‚å°±è—‰ç”±é€™äº›ç´¢å¼•æª”å¿«é€ŸæŸ¥æ‰¾ä½ç½®ã€‚æ¦‚å¿µå…¶å¯¦å°±æ˜¯å­—å…¸çš„ç´¢å¼•ï¼Œå­—å…¸é€™éº¼å¤§ä¸€æœ¬ä¸æœƒæœ‰äººå¾é ­æƒåˆ°å°¾ï¼Œéƒ½æ˜¯ç›´æ¥ç¿»åˆ°å­—å…¸æœ€å¾Œé¢çš„ç´¢å¼•å¿«é€Ÿæ‰¾åˆ°ç›®æ¨™ã€‚</p>
<p>é€™äº› source code tagging systemï¼Œé€šå¸¸æœƒç”¢ç”Ÿç´¢å¼•æª”ä¸¦ä¸”æä¾›ä¸€å€‹ä»‹é¢ï¼Œè®“ç·¨è¼¯å™¨ä½¿ç”¨å®ƒå€‘å¿«é€Ÿåœ¨ç¨‹å¼ç¢¼å…§å®šä½ã€‚</p>
<p>æ¥ä¸‹ä¾†å°‡é€ä¸€ä»‹ç´¹ cscope, gtags, ctags ç­‰ç­‰ä¸‰å€‹ source code tagging system åœ¨ vim è£¡çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ã€‚</p>
<h1 id="Cscope"><a href="#Cscope" class="headerlink" title="Cscope"></a>Cscope</h1><h2 id="Cscope-ç°¡ä»‹"><a href="#Cscope-ç°¡ä»‹" class="headerlink" title="Cscope ç°¡ä»‹"></a>Cscope ç°¡ä»‹</h2><p>cscope å®˜ç¶²è²ç¨±å¯ä»¥åšåˆ°ä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ul>
<li>æŸ¥è©¢æ‰€æœ‰ä½¿ç”¨åˆ°é€™å€‹ symbol çš„åœ°æ–¹</li>
<li>æŸ¥è©¢å…¨åŸŸè®Šæ•¸</li>
<li>æŸ¥è©¢ function åœ¨å“ªè¢«å‘¼å«</li>
<li>æŸ¥è©¢é€™å€‹ function å‘¼å«äº†èª°</li>
<li>ä½¿ç”¨å­—ä¸²æŸ¥è©¢æ‰¾åˆ°ç›®æ¨™</li>
<li>ä½¿ç”¨ egrep pattern å°‹æ‰¾ç›®æ¨™</li>
<li>å¿«é€Ÿå°‹æ‰¾å°ˆæ¡ˆä¸‹æª”æ¡ˆ</li>
<li>æŸ¥çœ‹å“ªå€‹æª”æ¡ˆ include ç•¶å‰æª”æ¡ˆ</li>
</ul>
<p>cscope æŒ‡ä»¤å¸¸ç”¨é¸é …</p>
<ul>
<li>bï¼šåªç”¢ç”Ÿç´¢å¼•æª”æ¡ˆï¼Œä¸é€²å…¥äº’å‹•æŸ¥è©¢ä»‹é¢</li>
<li>qï¼šç”¢ç”Ÿ cscope.in.out å’Œ cscope.po.outæ–‡ä»¶ï¼ŒåŠ å¿« cscope çš„ç´¢å¼•é€Ÿåº¦ </li>
<li>kï¼šç”¢ç”Ÿç´¢å¼•æª”æ¡ˆæ—¶ï¼Œä¸æœå°‹ /usr/include</li>
<li>Rï¼šéè¿´æœå°‹å­ç›®éŒ„</li>
</ul>
<h2 id="Cscope-å’Œ-vim"><a href="#Cscope-å’Œ-vim" class="headerlink" title="Cscope å’Œ vim"></a>Cscope å’Œ vim</h2><p>åœ¨å°ˆæ¡ˆç›®éŒ„ç”¢ç”Ÿç´¢å¼•æª”æ¡ˆ:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ cscope -bkqR</span><br></pre></td></tr></table></figure>
<p>æœƒç”¢ç”Ÿä¸‰å€‹æª”æ¡ˆ <code>cscope.in.out</code> <code>cscope.out</code> <code>cscope.po.out</code></p>
<p>é€²å…¥ vim ä¹‹å¾Œå¯ä»¥é€é <code>cs</code> æŸ¥çœ‹ cscope åœ¨ vim è£¡çš„ä½¿ç”¨æ–¹å¼</p>
<img data-src="/2020/11/28/vim-c-env-move/vim_cscope.png" class="">


<p>è®“ vim çŸ¥é“ cscope çš„è·¯å¾‘</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">set</span> cscopeprg=/path/<span class="keyword">to</span>/<span class="keyword">cscope</span></span><br></pre></td></tr></table></figure>

<p>æŒ‡å®š cscope ç´¢å¼•æª”æ¡ˆï¼Œè®“ vim çŸ¥é“è¦ç”¨å“ªå€‹ç´¢å¼•æª”æ¡ˆæŸ¥è©¢ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">cs</span> <span class="built_in">add</span> <span class="keyword">cscope</span>.out</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹ä¾†å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æŸ¥è©¢ (xxx ç‚ºæƒ³æœå°‹çš„ç›®æ¨™):</p>
<ul>
<li><code>:cs find a xxx</code> æŸ¥å°‹ xxx è¢«è³¦å€¼çš„åœ°æ–¹</li>
<li><code>:cs find c xxx</code> æŸ¥å°‹æ‰€æœ‰å‘¼å« xxx function çš„åœ°æ–¹</li>
<li><code>:cs find d xxx</code> æŸ¥å°‹ xxx function å‘¼å«çš„æ‰€æœ‰å‡½æ•¸</li>
<li><code>:cs find e xxx</code> ä½¿ç”¨ egrep pattern æŸ¥è©¢</li>
<li><code>:cs find f xxx</code> æ‰¾å‡º xxx æª”æ¡ˆåœ¨å“ªè£¡</li>
<li><code>:cs find g xxx</code> æŸ¥å°‹ xxx æ‰€å®šç¾©çš„åœ°æ–¹ (é€šå¸¸æœ€å¸¸ç”¨çš„æ˜¯é€™å€‹)</li>
<li><code>:cs find i xxx</code> æŸ¥å°‹æ‰€æœ‰ inlcude xxx æª”æ¡ˆçš„åœ°æ–¹</li>
<li><code>:cs find s xxx</code> æŸ¥å°‹æ‰€æœ‰ xxx symbol å‡ºç¾çš„åœ°æ–¹</li>
<li><code>:cs find t xxx</code> æŸ¥è©¢ xxx å­—ä¸²å‡ºç¾çš„åœ°æ–¹ï¼Œå…¶å¯¦æœå°‹æ•ˆæœå°±é¡ä¼¼ grep </li>
</ul>
<p>è¨˜å¾—æŸ¥è©¢å®Œçš„çµæœå¯ä»¥ç”¨ <code>:cw</code>, <code>:copen</code> åœ¨ quickfix window åˆ—å‡ºï¼š</p>
<h1 id="GNU-GLOBAL-gtags"><a href="#GNU-GLOBAL-gtags" class="headerlink" title="GNU GLOBAL (gtags)"></a>GNU GLOBAL (gtags)</h1><p>ç”± GNU GLOBAL ç”± GNU æ‰€é–‹ç™¼çš„ soure code tagging systemï¼Œæœ¬èº«æ”¯æŒå››ç¨®èªè¨€ï¼Œé€é Pygments å’Œ Universal Ctags çš„ parser å¯ä»¥æ”¯æŒå…¶ä»– 25 ç¨®èªè¨€ï¼Œæ”¯æ´ incremental updateï¼ŒåŸå§‹ç¢¼æ›´å‹•å¾Œï¼Œåªæœƒå°æ”¹è®Šçš„åœ°æ–¹ç´¢å¼•ï¼Œä¸æœƒé‡æ–°ç´¢å¼•ï¼Œé€™å°é¾å¤§çš„å°ˆæ¡ˆæœ‰å¾ˆå¤§çš„å¹«åŠ©ã€‚å¦å¤– gtags æä¾›äº† cscope ç›¸å®¹çš„äº’å‹•ä»‹é¢ï¼Œå«åš gtags-cscopeï¼Œè®“ä½ ç”¨èµ·ä¾†åƒ cscopeï¼Œä½†èƒŒå¾Œå…¶å¯¦æ˜¯ gtags çš„ç´¢å¼•æª”æ¡ˆã€‚</p>
<p>åœ¨å°ˆæ¡ˆç›®éŒ„ç”¢ç”Ÿç´¢å¼•æª”æ¡ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ gtags</span><br></pre></td></tr></table></figure>

<p>è®“ vim çŸ¥é“ gtags-cscope è·¯å¾‘ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">set</span> cscopeprg=/path/<span class="keyword">to</span>/gtsgs-<span class="keyword">cscope</span></span><br></pre></td></tr></table></figure>

<p>æŒ‡å®š gtags ç´¢å¼•æª”æ¡ˆï¼Œè®“ vim çŸ¥é“è¦ç”¨å“ªå€‹ç´¢å¼•æª”æ¡ˆæŸ¥è©¢ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">cs</span> <span class="built_in">add</span> GTAGS</span><br></pre></td></tr></table></figure>
<p>å€Ÿä¸‹ä¾†å°±å¯ä»¥ç”¨å’Œ cscope ä¸€æ¨£çš„æ–¹å¼æŸ¥è©¢ï¼Œé™¤äº† <code>:cs find d</code>ï¼Œå…¶ä»–çš†æ”¯æ´ </p>
<h1 id="Ctags"><a href="#Ctags" class="headerlink" title="Ctags"></a>Ctags</h1><h2 id="Ctags-ç°¡ä»‹"><a href="#Ctags-ç°¡ä»‹" class="headerlink" title="Ctags ç°¡ä»‹"></a>Ctags ç°¡ä»‹</h2><p>æœ€æ—©çš„ Ctag åœ¨ BSD ä¸Šå¯¦ç¾ï¼Œç‰ˆæœ¬è®Šé©çš„æ­·å²è„ˆçµ¡æˆ‘ä¸æ˜¯ç›¸ç•¶æ¸…æ¥šï¼ŒæŸ¥ä¸å¤ªåˆ°è³‡æ–™ã€‚<br>ç¾åœ¨æ™®åŠçš„ç‰ˆæœ¬æ˜¯ Exuberant Ctagsï¼Œä¸€é–‹å§‹å’Œ vim æ˜¯ä¸€åŒ…è»Ÿé«”ï¼Œä¸€èµ·ç™¼å¸ƒï¼Œä½†åœ¨ vim6 ä¹‹å¾Œç¨ç«‹æˆå…©å€‹å°ˆæ¡ˆï¼Œå¾é€™è£å¯çœ‹å‡ºå®ƒä¸€å®šå’Œ vim å…¼å®¹è‰¯å¥½ï¼Œä½†æ­¤ç‰ˆæœ¬åœ¨ 2009 å¹´ä¹‹å¾Œå·²ä¸å†ç¶­è­·ã€‚å»ºè­°ä½¿ç”¨Exuberant Ctags æ‰€ fork çš„ç‰ˆæœ¬ Universal Ctagsï¼Œç›®å‰é‚„åœ¨ç¶­è­·å’Œé–‹ç™¼ç•¶ä¸­ã€‚</p>
<h2 id="Ctags-å’Œ-vim"><a href="#Ctags-å’Œ-vim" class="headerlink" title="Ctags å’Œ vim"></a>Ctags å’Œ vim</h2><p>åœ¨å°ˆæ¡ˆä¸‹ç”Ÿæˆç´¢å¼•æª”æ¡ˆï¼Œå¯ä»¥çœ‹åˆ°ç›®éŒ„è£¡æœ‰ <code>tags</code> æª”æ¡ˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ctags -R *</span><br></pre></td></tr></table></figure>


<p>æŒ‡å®š tags ç´¢å¼•æª”æ¡ˆï¼Œè®“ vim çŸ¥é“è¦ç”¨å“ªå€‹ç´¢å¼•æª”æ¡ˆæŸ¥è©¢ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:<span class="keyword">set</span> <span class="keyword">tags</span>=<span class="keyword">tags</span></span><br></pre></td></tr></table></figure>

<p>å†ä¾†å°±å¯ä»¥ä½¿ç”¨:</p>
<ul>
<li><code>Ctrl + ]</code>: è·³åˆ°å®šç¾©ï¼Œå¦‚æœæœ‰å¤šå€‹åŒ¹é…å‰‡æœƒè·³åˆ°ç¬¬ä¸€å€‹</li>
<li><code>Ctrl + T</code>: è·³å›åŸæœ¬çš„åœ°æ–¹</li>
</ul>
<p>æ¯æ¬¡ç”¨ <code>ctrl + ]</code> è·³è½‰åˆ°å®šç¾©ï¼Œvim å°±æœƒæŠŠé€™ä½ç½®æ¨åˆ° tag stack è£¡ï¼Œæ¯æ¬¡ <code>ctrl + T</code> è·³å›åŸä¾†çš„åœ°æ–¹ï¼Œvim å°±æœƒå¾ tag stack è£¡ pop ä½ç½®å‡ºä¾†ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ <code>:tags</code> çœ‹åˆ° tag stack è£¡çš„å…§å®¹ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><p><a href="https://dev.to/iggredible/how-to-use-tags-in-vim-to-jump-to-definitions-quickly-2g28" target="_blank" rel="noopener">https://dev.to/iggredible/how-to-use-tags-in-vim-to-jump-to-definitions-quickly-2g28</a></p>
</li>
<li><p><a href="http://praton.me/2020/04/11/Exploring-kernel-code-with-vim.html" target="_blank" rel="noopener">http://praton.me/2020/04/11/Exploring-kernel-code-with-vim.html</a></p>
</li>
<li><p><a href="https://neovim.io/doc/user/usr_29.html" target="_blank" rel="noopener">:help usr_29.txt</a></p>
</li>
<li><p><a href="https://neovim.io/doc/user/usr_30.html" target="_blank" rel="noopener">:help usr_30.txt</a></p>
</li>
<li><p><a href="https://neovim.io/doc/user/tagsrch.html" target="_blank" rel="noopener">:help tagsrch.txt</a></p>
</li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
        <tag>neovim</tag>
        <tag>c</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠèŠä½ åœ¨ vim å¸¸ç”¨çš„ç§»å‹•æ–¹å¼</title>
    <url>/2020/10/03/vim-commonly-used-motion/</url>
    <content><![CDATA[<p>çœ‹ä¸‹åœ–ï¼Œå¦‚æœæƒ³å°‡ <code>&lt;expr&gt;</code> æ”¹æˆ <code>&lt;leader&gt;</code> ä½ æœƒæ€éº¼åšå‘¢?</p>
<img data-src="/2020/10/03/vim-commonly-used-motion/question.png" class="">

<p>é€šå¸¸æˆ‘çœ‹éçš„å¹¾ç¨®æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>j</code> å‘ä¸‹åˆ° 97 è¡Œï¼Œåœ¨ä½¿ç”¨ <code>l</code> åˆ° target ä¸¦ä¸”é–‹å§‹ç·¨è¼¯ï¼Œé€™ä¹Ÿæ˜¯æœ€ç³Ÿçš„</li>
<li>target çš„è¡Œæ•¸çœ‹èµ·ä¾†é›¢ window ä¸­å¤®è¡Œå¾ˆè¿‘ï¼Œ ä½¿ç”¨ <code>M</code> è·³åˆ° window ä¸­å¤®è¡Œï¼Œå†ä½¿ç”¨ <code>h</code> <code>j</code> <code>k</code> <code>l</code> åˆ° target</li>
<li>ä½¿ç”¨ <code>:set number</code> åˆ—å‡ºè¡Œè™Ÿï¼Œ æŒ‰ä¸‹ <code>97G</code> åˆ°é” 97 è¡Œï¼Œ <code>fe</code> <code>;</code> <code>;</code> <code>;</code><br>è¨»: <code>f{char}</code> æ‰¾åˆ°æ­¤è¡Œçš„ä¸‹ä¸€å€‹å­—æ¯ã€ <code>;</code> ç‚ºé‡è¤‡ä¸Šä¸€å€‹ <code>f</code> å‘½ä»¤</li>
<li>ä½¿ç”¨ <code>/</code> æœå°‹ <code>expr</code>ï¼Œåœ¨ä½¿ç”¨ <code>n</code> <code>n</code> <code>n</code> <code>n</code> åˆ° target</li>
<li><del>ä½¿ç”¨ <code>set mouse=n</code>ï¼Œç”¨æ»‘é¼ é» target</del><a id="more"></a>

</li>
</ol>
<h1 id="Easymotion"><a href="#Easymotion" class="headerlink" title="Easymotion"></a>Easymotion</h1><p>easymotion æ˜¯è§£æ±ºæ­¤æƒ…å¢ƒæœ€å¥½çš„æ–¹æ¡ˆä¹‹ä¸€ï¼Œå®ƒæä¾›äº†å¦ä¸€ç¨®æœå°‹æ–¹å¼ï¼Œåœ¨æœå°‹ç›®æ¨™ä¹‹å¾Œï¼Œæœƒå°‡å¯èƒ½ä½ç½®çš„æŠ½æ›æˆå…¶ä»–å­—æ¯ï¼Œä¸¦é«˜äº®é€™äº›å­—æ¯ï¼Œå†æŒ‰ä¸‹é€™äº›å­—æ¯å°±å¯ä»¥è·³åˆ°æ­¤ä½ç½® (ä¹‹å¾Œç°¡ç¨±ç‚º label and jump åŠŸèƒ½)ã€‚ easymotion çš„è¨­è¨ˆå°±æ˜¯åŠ å¼·å…§å»ºçš„ç§»å‹•æŒ‡ä»¤ï¼Œåªæ˜¯è·³è½‰åˆ°ç›®æ¨™çš„æ–¹å¼è®Šäº†ï¼Œæ‰€ä»¥ä¸éœ€è¦æ“”å¿ƒä¸æœƒç”¨ã€‚</p>
<p>å®‰è£</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'easymotion/vim-easymotion'</span></span><br></pre></td></tr></table></figure>
<p>easymotion çš„é è¨­çš„ key mapping éå¤šï¼Œå»ºè­°é‡å°æ‰€éœ€è‡ªè¡Œè¨­å®šå°±å¥½</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:EasyMotion_do_mapping</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="Easymotion-bd-f"><a href="#Easymotion-bd-f" class="headerlink" title="Easymotion-bd-f"></a>Easymotion-bd-f</h2><p>å°‡ <code>&lt;leader&gt;f</code> æ˜ å°„åˆ° easymotion-bd-fï¼Œå¾ˆæ˜é¡¯çš„é€™å€‹åŠŸèƒ½å°±æ˜¯åŠ å¼·å…§å»º fï¼Œå·®ç•°åœ¨æ–¼ï¼š</p>
<ul>
<li>å…§å»º f åªèƒ½å–®å‘å‘å‰æœå°‹ï¼Œè€Œä¸”åªèƒ½åœ¨æ­¤è¡Œ</li>
<li>easymotion-bd-fï¼Œbd ä»£è¡¨ bidirectionalï¼Œä¹Ÿå°±æ˜¯é›™å‘æœå°‹ï¼Œæœå°‹çµæœä¸é™åˆ¶åœ¨æ­¤è¡Œ</li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span> <span class="symbol">&lt;Plug&gt;</span>(easymotion-<span class="keyword">bd</span>-<span class="keyword">f</span>)</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹åœ–ç‚ºä½¿ç”¨ easymotion-bd-f æœå°‹ e å­—æ¯çš„çµæœï¼Œé‚„è¨˜å¾—æˆ‘å€‘çš„ target åœ¨ 97 è¡Œå—ï¼Œæ‰€ä»¥æŒ‰ä¸‹ <code>ji</code> å³å¯è·³åˆ° target äº†</p>
<img data-src="/2020/10/03/vim-commonly-used-motion/easymotion-f.png" class="" title="easymotion-f">

<h2 id="Easymotion-s2"><a href="#Easymotion-s2" class="headerlink" title="Easymotion-s2"></a>Easymotion-s2</h2><p>ä½¿ç”¨ easymotion-bd-f æœå°‹å¸¸å¸¸é‡åˆ°ä¸€å€‹å•é¡Œï¼šåªç”¨ä¸€å€‹å­—æ¯æœå°‹ç‚ºé™åˆ¶ï¼Œå°è‡´å¯èƒ½çš„ç›®æ¨™å¤ªå¤šäº†ï¼Œä½¿å¾—æ•´å€‹è¢å¹•å¾ˆäº‚ã€‚easymotion-s2 ä½¿ç”¨å…©å€‹å­—æ¯æœ€ç‚ºé™åˆ¶å»æœå°‹ï¼Œé€™ç¨®æ–¹å¼çœ‹ä¼¼ä¸èµ·çœ¼ï¼Œä½†è°æ˜è¨±å¤šï¼Œæ¯”èµ· f åªéœ€å¤šæŒ‰ä¸€å€‹éµï¼Œå°±èƒ½ä½¿ç›®æ¨™æ›´æ˜ç¢ºï¼Œä½¿è¢å¹•ä¹¾æ·¨è¨±å¤šã€‚</p>
<p>å°‡ <code>&lt;leader&gt;s</code> æ˜ å°„åˆ° easymotion-s2ï¼Œç”¨æ³•å’Œ easymotion-bd-f é¡ä¼¼åªæ˜¯å¤šäº†ä¸€å€‹å­—æ¯ã€‚<br>ç¶“éæ˜ å°„å¾Œä½¿ç”¨æ–¹æ³•ç‚º <code>&lt;leader&gt;s{char}{char}</code></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span>s <span class="symbol">&lt;Plug&gt;</span>(easymotion-s2)</span><br></pre></td></tr></table></figure>
<p>ä¸‹åœ–ç‚ºä½¿ç”¨ easymotion-s2 çš„æœå°‹ ex å­—æ¯çš„çµæœï¼Œè¢å¹•ä¹¾æ·¨å¾ˆå¤šï¼Œåœ¨æŒ‰ä¸‹ <code>k</code> åˆ°é” target</p>
<img data-src="/2020/10/03/vim-commonly-used-motion/easymotion-s2.png" class="" title="easymotion-s2">

<h1 id="vim-sneak"><a href="#vim-sneak" class="headerlink" title="vim-sneak"></a>vim-sneak</h1><p>easymotion çš„åŠŸèƒ½ç›¸ç•¶è±å¯Œï¼Œå°æ–¼å…§å»ºå¸¸ç”¨çš„ç§»å‹•æŒ‡ä»¤ <code>f</code> <code>F</code> <code>t</code> <code>T</code> <code>w</code> <code>W</code> <code>b</code> <code>B</code> â€¦ éƒ½æœ‰ç›¸å°æ‡‰çš„æ“´å¢åŠŸèƒ½ï¼Œé‚„æœ‰ä¸€å † fancy çš„åŠŸèƒ½ï¼Œå°æˆ‘ä¾†èªªå¹¾ä¹ç”¨ä¸åˆ°ï¼Œè®“æˆ‘æœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯ easymotion-s2ï¼Œ ä»¥åŠŸèƒ½ä¸Šä¾†çœ‹ <a href="https://github.com/justinmk/vim-sneak" target="_blank" rel="noopener">justinmk/vim-sneak</a> å°±æ˜¯ç°¡æ˜“ç‰ˆçš„ easymotionã€‚</p>
<p>å®‰è£ vim-sneak</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'justinmk/vim-sneak'</span></span><br></pre></td></tr></table></figure>

<p>é–‹å•Ÿå’Œ easymotion ç›¸åŒçš„ label and jump åŠŸèƒ½</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:sneak</span>#label = <span class="number">1</span></span><br></pre></td></tr></table></figure>


<p>vim-sneak æä¾›äº†å››å€‹æŒ‰éµ <code>&lt;Plug&gt;Sneak_f</code> <code>&lt;Plug&gt;Sneak_F</code> <code>&lt;Plug&gt;Sneak_t</code> <code>&lt;Plug&gt;Sneak_T</code> é¡ä¼¼æ–¼ <code>f</code> <code>F</code> <code>t</code> <code>T</code>ï¼Œå’Œå…§å»ºçš„å·®ç•°å°±æ˜¯é€™äº›æŒ‰éµæœå°‹çš„æ˜¯å…©å€‹å­—å…ƒï¼Œå’Œ easymotion-s2 çš„å·®ç•°å°±æ˜¯æ²’æœ‰é›™å‘æœå°‹</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span><span class="keyword">f</span> <span class="symbol">&lt;Plug&gt;</span>Sneak_f</span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span>F <span class="symbol">&lt;Plug&gt;</span>Sneak_F</span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span>t <span class="symbol">&lt;Plug&gt;</span>Sneak_t</span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;leader&gt;</span>T <span class="symbol">&lt;Plug&gt;</span>Sneak_T</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨çš„æ–¹æ³•å’Œ easymotion-s2 å¹¾ä¹ä¸€æ¨£ï¼Œå°±ä¸å†åšå±•ç¤ºã€‚</p>
<p>åœ¨ <a href="https://www.reddit.com/r/vim/comments/2ydw6t/large_plugins_vs_small_easymotion_vs_sneak" target="_blank" rel="noopener">Large plugins vs. small (EasyMotion vs. Sneak)</a> è¨è«–ä¸²è£¡ï¼Œvim-sneak ä½œè€…è¬›è¿°äº† vim-sneak å’Œ easymotion çš„å¯¦ä½œå·®ç•°ï¼Œåœ¨é€™å°±ä¸ä»”ç´°æ¢è¨ã€‚</p>
<h1 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h1><p>æœ¬ç« é€éä¸€å€‹ç°¡å–®çš„è·³è½‰å•é¡Œï¼Œå¼•å‡º easymotion plugin çš„ç‰¹è‰²ï¼Œèˆ‡å…¶èªª easymotion æ˜¯ä¸€å€‹ pluginï¼Œå…¶åŠŸèƒ½çš„è±å¯Œç¨‹åº¦ï¼Œæˆ‘æ›´æœƒæƒ³æŠŠå®ƒç¨±ç‚º motion æ¡†æ¶ï¼Œæœ€æœ‰åƒ¹å€¼çš„åŠŸèƒ½å°±æ˜¯ label and jump çš„åŠŸèƒ½ï¼Œæä¾›äº†ä¸€ç¨®å…¨æ–°çš„è·³è½‰æ–¹å¼ï¼Œå¤§å¤§çš„æå‡äº† cursor çš„ç§»å‹•æ•ˆç‡ã€‚</p>
<p>å»ºè­°å…ˆä½¿ç”¨ easymotion ä½¿ç”¨éä¸€æ®µæ™‚é–“å¯Ÿè¦ºè‡ªå·±çš„ä½¿ç”¨ç¿’æ…£ (ä¸€å®šå¾—æŸ¥çœ‹ <code>:help easymotion</code>)ï¼Œå¦‚æœå«Œæ£„å…¶è‡ƒè…«ï¼Œåœ¨é‡å°è‡ªå·±çš„ä½¿ç”¨ç¿’æ…£å»æŸ¥æ‰¾é¡ä¼¼çš„ pluginï¼Œä»¥æˆ‘ä¾†èªªæœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯ easymotion-s2 ï¼Œæ‰€ä»¥æˆ‘å°±é¸ç”¨äº† <a href="https://github.com/justinmk/vim-sneak" target="_blank" rel="noopener">justinmk/vim-sneak</a>ï¼ŒåŠŸèƒ½é¡ä¼¼ easymotion-s2 ä½†ç›¸å°æ–¼ easymotion è¼•é‡è¨±å¤šã€‚</p>
<p>åˆ¥å¿˜äº†ï¼Œé€™äº›åŠŸèƒ½å…¨éƒ½æ˜¯ motionï¼Œæ˜¯å¯ä»¥æ­é… operator ä½¿ç”¨çš„ï¼Œå¦‚æœæˆ‘æŠŠå•é¡Œæ”¹æˆå¾ cursor ä½ç½®ä¸€è·¯åˆªé™¤åˆ° target çš„ä½ç½®ï¼Œä½ æœƒæ€éº¼åšï¼Ÿ</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://www.reddit.com/r/vim/comments/2ydw6t/large_plugins_vs_small_easymotion_vs_sneak" target="_blank" rel="noopener">Large plugins vs. small (EasyMotion vs. Sneak)</a></li>
<li><a href="https://github.com/justinmk/vim-sneak" target="_blank" rel="noopener">justinmk/vim-sneak</a></li>
<li><a href="https://github.com/yangmillstheory/vim-snipe" target="_blank" rel="noopener">yangmillstheory/vim-snipe</a></li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>èª°èªªä¸èƒ½åœ¨ vim è£¡ç·¨è­¯ï¼Œå¾ :make åˆ° :Make</title>
    <url>/2020/09/10/vim-make/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å›æƒ³ä¸€ä¸‹ï¼Œä¸Šä¸€æ¬¡ä½¿ç”¨ vim å¯« code åˆ°ä¸€å€‹æ®µè½è¦ç·¨è­¯æ™‚ï¼Œä½ æ˜¯æ€éº¼åšçš„ã€‚</p>
<p>æˆ‘çœ‹åˆ°å¤§å¤šæ•¸äººçš„æ–¹å¼ï¼Œå°±æ˜¯å°‡ terminal åˆ‡æˆå…©å¡Šï¼Œä¸€å¡Šå¯« codeï¼Œä¸€å¡Šç·¨è­¯ï¼Œè‹¥ç·¨è­¯æœ‰éŒ¯èª¤ï¼Œå†ç§»å‹•åˆ°å¯« code å€å¡Šæ›´æ”¹ã€‚<br>å¦‚æœä½¿ç”¨æ­¤æ–¹æ³•ï¼Œç•¶å°ˆæ¡ˆæœ‰è¦æ¨¡æ™‚ï¼Œç·¨è­¯éŒ¯èª¤ä¸€ç™¾æ¢ï¼Œçœ‹äº†ç·¨è­¯éŒ¯èª¤åœ¨å“ªä¹‹å¾Œï¼Œå†å°‡ç·¨è­¯éŒ¯èª¤çš„ä½ç½®ï¼Œå¾å°ˆæ¡ˆè£¡æ‰¾å‡ºä¾†ï¼Œåè¦†ä¾†å› 100 æ¬¡ï¼Œç›´åˆ°ä¿®æ­£å®Œç•¢ã€‚<br>æœ¬æ–‡ä»¥ C èªè¨€å°ˆæ¡ˆç‚ºä¾‹ (ç•¶ç„¶ä¸æ˜¯åªæœ‰ C èªè¨€æ‰èƒ½é€™æ¨£å­å¹¹ï¼Œå¯çœ‹ Q&amp;A)ï¼ŒèŠèŠå¼·å¤§çš„ vim åœ¨é€™ç¨®æƒ…å¢ƒä¸‹æœ‰ä»€éº¼å¥½çš„è§£æ±ºæ–¹æ¡ˆã€‚</p>
<img data-src="/2020/09/10/vim-make/tmux_split.png" class="">
 <a id="more"></a>


<h1 id="å¼·å¤§çš„-make"><a href="#å¼·å¤§çš„-make" class="headerlink" title="å¼·å¤§çš„ :make"></a>å¼·å¤§çš„ <code>:make</code></h1><h2 id="åŸºæœ¬æ¬¾"><a href="#åŸºæœ¬æ¬¾" class="headerlink" title="åŸºæœ¬æ¬¾"></a>åŸºæœ¬æ¬¾</h2><p>æ­¤æ¬¡ç¯„ä¾‹å°±æ‹¿ neovim ä¾†ç·¨è­¯å¥½äº†ï¼Œæ ¹æ“šå®˜æ–¹æ–‡ä»¶è¦é€™æ¨£ç·¨è­¯ <code>make CMAKE_BUILD_TYPE=Release</code>ï¼Œæ‰€ä»¥åœ¨æˆ‘åœ¨ vim è£¡é€™æ¨£ç·¨ <code>:make CMAKE_BUILD_TYPE=Release</code></p>
<p>çœ‹èµ·ä¾†å™´äº†ä¸€é»éŒ¯èª¤ï¼Œæ¡ˆäº† <code>enter</code> ä¼¼ä¹ä¹‹å¾Œä»€éº¼äº‹éƒ½æ²’ç™¼ç”Ÿï¼Œå›åˆ°å¹³å¸¸ã€‚</p>
<img data-src="/2020/09/10/vim-make/make_cmd.png" class="">

<p>ç”¨ <code>:cl</code> æŒ‡ä»¤ï¼Œå–”å¹¹!ä¸æ˜¯ä¸€é»éŒ¯èª¤ï¼Œæ˜¯ä¸€å †éŒ¯èª¤ï¼Œæ²’åˆ—å‡ºä¾†æ ¹æœ¬ä¸çŸ¥é“ã€‚</p>
<img data-src="/2020/09/10/vim-make/clist_cmd.png" class="">

<p>é‡é»ä¾†äº†!! å¯ä»¥ä½¿ç”¨ <code>:cn</code> (<code>:cnext</code>) è·³åˆ°ä¸‹ä¸€å€‹éŒ¯èª¤ä½ç½®ï¼Œ<code>:cp</code> (<code>:cprevious</code>) è·³è½‰åˆ°ä¸Šä¸€å€‹éŒ¯èª¤ä½ç½®ï¼Œå°±ä¸éœ€è¦è‡ªå·±æ‰‹å‹•ä¸€å€‹ä¸€å€‹éŒ¯èª¤æ‰¾å‡ºä¾†ã€‚<br>çœ‹ä¸Šåœ–ï¼Œå¯ä»¥è§€å¯Ÿåˆ°ï¼Œæ¯ä¸€æ¢éŒ¯èª¤å‰é¢éƒ½æœ‰ä¸€å€‹æ•¸å­—ï¼Œå¦‚æœæƒ³è¦è·³åˆ°ç‰¹å®šéŒ¯èª¤å»ä¿®é‚£å°±ä½¿ç”¨ <code>:cc [number]</code>ï¼Œè·³è½‰åˆ°ç¬¬ä¸€å€‹éŒ¯èª¤å°±ç”¨ <code>:cc 12</code>ï¼Œè·³è½‰åˆ°ç¬¬ä¸‰å€‹éŒ¯èª¤å°±ç”¨ <code>:cc 19</code>ã€‚</p>
<p>ç«åŠ›å±•ç¤º:</p>
<img data-src="/2020/09/10/vim-make/clist_demo.gif" class="">

<p>ç¸½çµä¸€ä¸‹æŒ‡ä»¤:</p>
<ul>
<li><code>:make</code>: åŸ·è¡Œ makefile</li>
<li><code>:cl</code>: åˆ—å‡ºæ‰€æœ‰éŒ¯èª¤</li>
<li><code>:cn</code>: è·³åˆ°ä¸‹å€‹éŒ¯èª¤</li>
<li><code>:cp</code>: è·³åˆ°ä¸Šå€‹éŒ¯èª¤</li>
<li><code>:cc [number]</code>: è·³è½‰åˆ°ç‰¹å®šéŒ¯èª¤</li>
</ul>
<h2 id="å¦‚è™æ·»ç¿¼çš„-quickfix-window"><a href="#å¦‚è™æ·»ç¿¼çš„-quickfix-window" class="headerlink" title="å¦‚è™æ·»ç¿¼çš„ quickfix-window"></a>å¦‚è™æ·»ç¿¼çš„ quickfix-window</h2><p>ç·¨è­¯å®Œä¹‹å¾Œï¼Œé™¤äº†ç”¨ <code>:cl</code> æŸ¥çœ‹ï¼Œå¦ä¸€ç¨®æ–¹å¼å°±æ˜¯ç”¨ <code>:copen</code>ï¼Œæ‰“ä¸‹æ­¤æŒ‡ä»¤ä¹‹å¾Œï¼Œå°‡æœƒå½ˆå‡º quickfix-windowï¼Œåˆ—å‡ºçš„éŒ¯èª¤å…¶å¯¦å°±æ˜¯ <code>:clist</code> çš„è©³ç´°ç‰ˆæœ¬ï¼Œ quickfix-window åªæ˜¯æä¾›äº†ä¸€ç¨®æŸ¥æ‰¾çš„æ–¹å¼ã€‚</p>
<img data-src="/2020/09/10/vim-make/copen_cmd.png" class="">
<p>ç§»è½‰åˆ° quickfix-window å¾Œï¼Œç§»å‹•åˆ°æƒ³è¦æŸ¥çœ‹çš„éŒ¯èª¤ï¼Œæ¡ˆ <code>enter</code> å³å¯è·³è½‰åˆ°è©²éŒ¯èª¤ä½ç½®ï¼Œç•¶ç„¶ä¹Ÿèƒ½é…åˆ <code>:cn</code>, <code>:cp</code>, <code>:cc [number]</code>ï¼Œquickfix-window æœƒé…åˆé€™äº›æŒ‡ä»¤é€£å‹•é¡¯ç¤ºç›®å‰ä½ç½®ã€‚</p>
<p>Note: è©³è¦‹ <code>:help quickfix-window</code></p>
<h1 id="è®“ä½ é£›èµ·ä¾†çš„-vim-dispatch"><a href="#è®“ä½ é£›èµ·ä¾†çš„-vim-dispatch" class="headerlink" title="è®“ä½ é£›èµ·ä¾†çš„ vim-dispatch"></a>è®“ä½ é£›èµ·ä¾†çš„ vim-dispatch</h1><p>ä½¿ç”¨ vim å…§å»ºçš„ <code>:make</code> æŒ‡ä»¤ï¼Œåœ¨ç·¨è­¯æ™‚å…¶å¯¦æ˜¯æœƒ block æ•´å€‹ vim çš„ï¼Œè‹¥å°ˆæ¡ˆå¤ å¤§ç·¨è­¯å¾ˆä¹…ï¼Œé‚£æ®µæ™‚é–“ä»€éº¼éƒ½ä¸èƒ½åšï¼Œåªèƒ½çœ‹è‘—ä»–ç·¨è­¯ï¼Œvim-dispatch å®Œç¾è§£æ±ºäº†é€™å€‹å•é¡Œã€‚</p>
<p>å®‰è£:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'tpope/vim-dispatch'</span></span><br></pre></td></tr></table></figure>

<p>å…¶å¯¦ vim-dispatch ç”¨æ³•å¾ˆç°¡å–®ï¼Œ<code>:Make</code> ç·¨è­¯ï¼Œ<code>:Copen</code> æ‰“é–‹ quickfix-windowï¼Œç•¶ç„¶ä¹Ÿèƒ½é…åˆå‰›å‰›æ‰€æåˆ°çš„è·³è½‰æŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¾ä¹å®Œç¾é…åˆ vim çš„ä½¿ç”¨ç¿’æ…£ã€‚</p>
<p>ç•¶ç„¶ vim-dispatch ä¸åªé€™æ¨£è€Œå·²ï¼Œå…¶ä»–åŠŸèƒ½ä¸åœ¨æœ¬ç¯‡ç¯„åœï¼Œè©³æƒ…è«‹è¦‹ vim-dispatch çš„æ–‡ä»¶ã€‚</p>
<p>ç«åŠ›å±•ç¤ºï¼Œå¯ä»¥çœ‹åˆ°ä¸Šæ–¹çš„è¦–çª—å¯ä»¥ç§»å‹• cursorï¼Œä¸‹æ–¹å‰‡ç¹¼çºŒç·¨è­¯:</p>
<img data-src="/2020/09/10/vim-make/Make_demo.gif" class="">

<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h1><h2 id="vim-ä½¿ç”¨-make-æŒ‡ä»¤ï¼Œé‚£ä¸æ˜¯åªæœ‰å¯«-Makefile-æ‰èƒ½ç”¨å—"><a href="#vim-ä½¿ç”¨-make-æŒ‡ä»¤ï¼Œé‚£ä¸æ˜¯åªæœ‰å¯«-Makefile-æ‰èƒ½ç”¨å—" class="headerlink" title="vim ä½¿ç”¨ :make æŒ‡ä»¤ï¼Œé‚£ä¸æ˜¯åªæœ‰å¯« Makefile æ‰èƒ½ç”¨å—?"></a>vim ä½¿ç”¨ <code>:make</code> æŒ‡ä»¤ï¼Œé‚£ä¸æ˜¯åªæœ‰å¯« Makefile æ‰èƒ½ç”¨å—?</h2><p>ç•¶ç„¶åœ¨æƒ³åœ¨å…¶ä»–èªè¨€ä½¿ç”¨ <code>:make</code> æŒ‡ä»¤ï¼Œé”åˆ°ä¸€æ¨£æ•ˆæœå°±è¦ç·¨å¯«å®¢è£½åŒ–çš„ plugin äº†ï¼Œç•¶ç„¶å¾ˆå—æ­¡è¿çš„èªè¨€éƒ½æœ‰äººå¯«å¥½å•¦ï¼Œé€šå¸¸éƒ½æ˜¯åŒ…åœ¨èªè¨€ plugin è£¡ï¼š</p>
<ul>
<li><a href="https://github.com/rust-lang/rust.vim" target="_blank" rel="noopener">rust.vim</a>: åŸæœ¬ç·¨è­¯æ–¹å¼æ˜¯ <code>cargo build</code>ï¼Œåœ¨ vim è£¡è®Šæˆ <code>:make build</code> å°±å¥½ï¼Œä»¥æ­¤é¡æ¨å¯ä»¥ <code>:make run</code></li>
<li><a href="https://github.com/fatih/vim-go" target="_blank" rel="noopener">vim-go</a>:åœ¨ vim-go å¯ä»¥ä½¿ç”¨ <code>:GoBuild</code>, <code>:GoRun</code></li>
</ul>
<h1 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h1><p>vim æ˜¯ä¸€å€‹å¤è€çš„ç·¨è¼¯å™¨ï¼ŒæŸäº›ç‰¹è‰²å’Œ C èªè¨€æ²¾ä¸Šé—œä¿‚ï¼Œæ¯”å¦‚èªª make æŒ‡ä»¤ (æˆ–è¨±ç•¶å¹´ C èªè¨€ç¨ä½”å¤©ä¸‹!?)ï¼Œç•¶ç„¶ vim ä¸åªå¯ä»¥ä½¿ç”¨ make é€™ç¨®è‡ªå‹•åŒ–ç·¨è­¯ï¼Œvim ä¹Ÿé–‹æ”¾äº†å¹¾å€‹ api ä½¿å¾—å†èµ·ä»–èªè¨€ä¹Ÿèƒ½é”æˆä¸€æ¨£çš„æ•ˆæœ (è©³è¦‹ <code>:help makeprg</code>)ï¼Œåœ¨å°ˆæ¡ˆæ„ˆå¤§æ™‚æ„ˆèƒ½é¡¯ç¾å…¶æ•ˆæœï¼Œç•¶å¹´æˆ‘ä¹Ÿæ˜¯ç¢°äº†ä¸€é» linux kernelï¼Œæ‰å­¸ç¿’åˆ°é€™å€‹æŠ€å·§ï¼ŒåŠ é€Ÿäº†ä¸å°‘é–‹ç™¼é€Ÿåº¦ã€‚</p>
<p>å¦‚æœæœ‰ä»€éº¼ç›¸é—œæŠ€å·§ï¼Œæ­¡è¿åœ¨åº•ä¸‹ç•™è¨€äº¤æµã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://www.ptt.cc/bbs/Editor/M.1285722960.A.BF5.html" target="_blank" rel="noopener">Re: [è½‰éŒ„][å•é¡Œ] VIM ç·¨è­¯èˆ‡åŸ·è¡Œ</a></li>
<li>vim help doc</li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠèŠ vim mark ä½¿ç”¨æƒ…å¢ƒ - code åƒç…§</title>
    <url>/2020/09/07/vim-mark-tips/</url>
    <content><![CDATA[<img data-src="/2020/09/07/vim-mark-tips/cover.png" class="">
<p>å¯«ç¨‹å¼çš„æ™‚å€™å¸¸å¸¸é‡åˆ°ä¸€ç¨®æƒ…æ³ï¼Œå‡è¨­ä½ æ˜¯åœ˜éšŠçš„æ–°äººï¼Œéœ€è¦å¸¸å¸¸åƒç…§åˆ¥äººçš„ç¨‹å¼ï¼Œçœ‹çœ‹åœ˜éšŠçš„ coding style ç­‰ç­‰ï¼Œå¯èƒ½éœ€è¦åƒç…§ A file çš„ç¬¬ 10 è¡Œï¼ŒB file ç¬¬ 8 è¡Œï¼ŒC file ç¬¬ 999 è¡Œã€‚</p>
<p>å¦ä¸€ç¨®æƒ…å¢ƒå‰‡æ˜¯åœ¨å¯«æ¸¬è©¦çš„æ™‚å€™æœƒå’Œå¯¦ä½œäº¤äº’åƒç…§ï¼Œè€Œæ¸¬è©¦ç¨‹å¼å¾€å¾€å’Œå¯¦ä½œç¨‹å¼æœƒæ‹†é–‹ä¸åŒçš„æª”æ¡ˆï¼Œæ‰€ä»¥å°±å¿…é ˆè¦ä¸€ç›´è·³è½‰ã€‚</p>
<p>ä½¿ç”¨ split çš„æ–¹å¼ç¸±ç„¶æ˜¯ä¸€å€‹ä¸éŒ¯çš„æ–¹å¼ï¼Œä½†æ˜¯å¦‚æœè¦åƒç…§çš„é»å¤§æ–¼ä¸‰å€‹ï¼Œå°±å°‡è¢å¹•åˆ‡æˆä¸‰ä»½ï¼Œé‚£å·¥ç¨‹å¸«å°±ç›¸ç•¶ç—›è‹¦äº†ï¼Œä¸æ˜¯æ¯å€‹äººéƒ½ç”¨é€™ç¨®é›»è…¦è¢å¹•å•Šã€‚é€™ç¨® split çš„æ–¹å¼é‚„æœ‰å¦ä¸€å€‹ç¼ºé»ï¼šå¦‚æœæ‰‹æ®˜å°‡æª”æ¡ˆé—œæ‰ï¼Œå°±å¾—é‡æ‰¾ã€‚</p>
<img data-src="/2020/09/07/vim-mark-tips/cj890.jpg" class="">

 <a id="more"></a>

<h1 id="Mark"><a href="#Mark" class="headerlink" title="Mark"></a>Mark</h1><p>vim çš„ mark å–åæˆ–è¨±æºè‡ªæ–¼ bookmark (æ›¸ç±¤) é€™å€‹å­—ï¼Œæ›¸ç±¤çš„ç”¨æ„åœ¨æ–¼èƒ½å¿«é€Ÿæ‰¾å›ä½ ä¸Šæ¬¡çœ‹çš„é‚£ä¸€é ï¼Œè€Œ vim mark çš„ç”¨æ„ä¹Ÿæ˜¯å¦‚æ­¤ï¼šèƒ½å¿«é€Ÿæ‰¾å›ä½ å‰›å‰›åœ¨çœ‹ code çš„åœ°æ–¹ã€‚</p>
<p>vim çš„ mark åˆ†ç‚ºä¸‰ç¨®ï¼š</p>
<ul>
<li>Local mark <code>a-z</code>ï¼š æ¯ä¸€å€‹ file è£¡çš†æœ‰è‡ªå·±çš„ local markï¼Œä¹Ÿå°±æ˜¯èªªæª”æ¡ˆ A å¯ä»¥æœ‰ mark a, æª”æ¡ˆ B è£¡ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„ mark a</li>
<li>Global mark <code>A-Z</code>ï¼š æ­¤ç¨® mark æ˜¯å…¨åŸŸçš„ï¼Œä¹Ÿå°±æ˜¯èªªåœ¨æª”æ¡ˆ A è£¡æ‰€çœ‹åˆ°çš„ mark A å’Œ B æª”æ¡ˆ B è£¡çš„ mark A æ˜¯ä¸€æ¨£çš„</li>
<li>Special markï¼šå…¶ä»–ç¥å¥‡çš„ markï¼Œä¸åœ¨æ­¤æ–‡ç« è¨è«–ç¯„åœ</li>
</ul>
<p>mark çš„åŸºæœ¬ä½¿ç”¨ï¼š</p>
<ul>
<li><code>ma</code>ï¼š åœ¨é€™å€‹åœ°æ–¹è¨­ç½® mark a</li>
<li><code>mA</code>ï¼š åœ¨é€™å€‹åœ°æ–¹è¨­ç½® mark A</li>
<li><code>&#39;a</code>ï¼š è·³åˆ° mark a çš„é€™è¡Œ (æ­¤è¡Œçš„ç¬¬ä¸€å€‹éç©ºç™½å­—å…ƒ)</li>
<li><code>`a</code>ï¼š ç²¾æº–çš„è·³åˆ°ä½ ç•¶åˆè¨­ç½® mark a çš„ä½ç½® (ç¬¬å¹¾è¡Œç¬¬å¹¾åˆ—)</li>
<li><code>:marks</code>ï¼š åˆ—å‡ºä¾†æ‰€æœ‰ markï¼Œæœ‰æ™‚å€™ mark è¨­ç½®å¤ªå¤šæœƒå¿˜</li>
</ul>
<p>æ›´å¤šè©³ç´°æ“ä½œè«‹åƒç…§ Reference 3</p>
<h1 id="å›åˆ°æ­£é¡Œ"><a href="#å›åˆ°æ­£é¡Œ" class="headerlink" title="å›åˆ°æ­£é¡Œ"></a>å›åˆ°æ­£é¡Œ</h1><p>é‚„è¨˜å¾—ä¸€é–‹å§‹çš„æƒ…å¢ƒæ•˜è¿°å—ï¼Ÿ<br>é›–ç„¶ä½ å·²ç¶“çŸ¥é“è¦åœ¨ A file ç¬¬ 10 è¡Œ <code>mA</code>ï¼Œ åœ¨ B file ç¬¬ 8 è¡Œ <code>mB</code>ï¼ŒC file ç¬¬ 999 è¡Œ <code>mC</code>ã€‚</p>
<p>å¯¦éš›ä¸Šåœ¨å¯« code æ™‚æˆ‘æœƒé€™æ¨£åšï¼š</p>
<ul>
<li>æˆ‘æœƒå…ˆå°‡æˆ‘éœ€è¦åƒç…§çš„åœ°æ–¹æ‰¾å‡ºä¸¦ä¸” markï¼Œä»¥å‰›å‰›çš„ä¾‹å­ä¾†èªªå°±æ˜¯åœ¨ A file ç¬¬ 10 è¡Œ <code>mA</code> åœ¨ B file ç¬¬ 8 è¡Œ <code>mB</code>ï¼ŒC file ç¬¬ 999 è¡Œ <code>mC</code></li>
<li>ä½¿ç”¨ <code>:vsplit</code> å°‡è¢å¹•åˆ‡æˆå…©é‚Šï¼Œå·¦é‚Šå¯« codeï¼Œå³é‚Šç•¶åƒç…§å€åŸŸ</li>
<li>éœ€è¦åƒç…§ B é€™å€‹ä½ç½®æ™‚ï¼Œç§»å‹•åˆ°åƒç…§å€åŸŸ ï¼Œ<code>&#39;B</code> å†ç§»å‹•å›å¯« code å€åŸŸç¹¼çºŒå¯«</li>
</ul>
<img data-src="/2020/09/07/vim-mark-tips/mark_show.png" class="">

<p>é‚£ local mark ä»€éº¼æ™‚å€™ç”¨ï¼Ÿ<br>ç•¶ä¸€å€‹æª”æ¡ˆå¤§æ–¼ 1000 è¡Œï¼Œå¯«çš„ç¨‹å¼åœ¨ 1001 è¡Œï¼Œä½†ä½ éœ€è¦åƒç…§çš„ç¨‹å¼åœ¨ç¬¬ä¸€è¡Œï¼Œä¹Ÿå°±æ˜¯éƒ½åœ¨åŒä¸€å€‹ file è·³è½‰çš„æ™‚å€™å¯ä»¥ä½¿ç”¨ã€‚</p>
<h1 id="search-å°æŠ€å·§"><a href="#search-å°æŠ€å·§" class="headerlink" title="search å°æŠ€å·§"></a>search å°æŠ€å·§</h1><p>æ¯æ¬¡åœ¨ä½¿ç”¨ <code>/</code> æœå°‹ä¸€å®šæœƒæ¡ˆ <code>n</code> æˆ– <code>N</code> åˆ°è™•è·³è½‰ï¼Œå°‹æ‰¾ç›®æ¨™ï¼Œå¸¸å¸¸æ‰¾å®Œäº†ä¹‹å¾Œï¼Œå¿˜è¨˜æˆ‘åŸæœ¬çš„åœ°æ–¹åœ¨å“ªäº†ï¼Œæ­¤æ™‚å°±èƒ½å…ˆç”¨ mark è¨˜ä½å¾Œåœ¨é–‹å§‹ç”¨ <code>/</code> æŸ¥æ‰¾ã€‚<br>ç”±æ–¼å¸¸ä½¿ç”¨é€™ç¨®æ“ä½œï¼Œæ‰€ä»¥ç›´æ¥é€™æ¨£ï¼š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">nnoremap</span> / ms/</span><br></pre></td></tr></table></figure>
<p> åœ¨<code>/</code>æœå°‹å®Œå¾Œï¼Œè¦è·³å›åŸæœ¬çš„åœ°æ–¹å°± <code>&#39;s</code> å°±å¥½</p>
<h1 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h1><p>äººé¡ç¸½æ˜¯æœƒåœ¨å¤§é‡çš„è³‡æ–™ä¸­è¿·å¤±ï¼Œä¸¦ä¸”èŠ±ä¸Šå¾ˆå¤šæ™‚é–“æŸ¥æ‰¾å’Œè¨˜æ†¶ï¼Œæ¨™è¨˜(æˆ–æ˜¯æ›¸ç±¤)å°±æ˜¯å…¶ä¸­ä¸€ç¨®è§£æ±ºæ–¹æ¡ˆï¼Œè€Œä¸”æ‡‰ç”¨ä¸åªåœ¨æ›¸ä¸Šï¼Œåˆ°è™•éƒ½å¯ä»¥çœ‹åˆ°é¡ä¼¼çš„æ‡‰ç”¨ï¼Œåƒæ˜¯æª”æ¡ˆå¤¾çš„æ¨™ç±¤ã€è‹±æ–‡æ›¸åœ¨æœ€å¾Œæœƒæœ‰çš„ç´¢å¼•ï¼Œç„¶è€Œåœ¨å¯«ç¨‹å¼ä¸Šä¹Ÿä¸ä¾‹å¤–ã€‚ä¸ç®¡æ˜¯åœ¨å¯« code ä¸Šé‚„æ˜¯å…¶ä»–æ‡‰ç”¨ï¼Œå¥½å¥½çš„æ‡‰ç”¨é€™äº›å·¥å…·å°‡èƒ½äº‹åŠåŠŸå€ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol>
<li><a href="https://medium.com/usevim/vim-101-marks-caad7106b241" target="_blank" rel="noopener">https://medium.com/usevim/vim-101-marks-caad7106b241</a></li>
<li><a href="https://medium.com/usevim/vim-101-practicing-marks-fc5778d8aaea" target="_blank" rel="noopener">https://medium.com/usevim/vim-101-practicing-marks-fc5778d8aaea</a></li>
<li><a href="https://vim.fandom.com/wiki/Using_marks" target="_blank" rel="noopener">https://vim.fandom.com/wiki/Using_marks</a></li>
</ol>
]]></content>
      <tags>
        <tag>vim</tag>
        <tag>neovim</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½ æ‡‰è©²æ“´å……çš„ text object</title>
    <url>/2020/09/22/vim-text-object/</url>
    <content><![CDATA[<p>vim é«˜æ•ˆç‡ç·¨è¼¯çš„èƒŒå¾Œï¼Œoperator, motion, text object çš„é…åˆåŠŸä¸å¯æ²’ã€‚</p>
<p>operator æ˜¯ç·¨è¼¯çš„å‹•ä½œï¼Œ text object å°±æ˜¯æ–‡å­—å€å¡Šï¼Œmotion æ˜¯è·³è½‰åˆ°æ–‡ä»¶é»ï¼Œé€éä¸‰è€…çš„æŒ‰éµé…åˆï¼Œå°±èƒ½é”åˆ°æ‰€æƒ³åŠæ‰€å¾—çš„ç·¨è¼¯æ–¹å¼ã€‚</p>
<p>å¦‚æœä½ æœ‰çœ‹éåˆ¥äººä½¿ç”¨ vim ï¼Œé€šå¸¸æœƒæœ‰é€™ç¨®æƒ³æ³•ï¼šæ€éº¼éš¨ä¾¿æŒ‰å¹¾å€‹éµå°±åˆªé€™è£¡åˆªé‚£è£¡è¤‡è£½é€™è£¡è¤‡è£½é‚£è£¡ï¼Œé€Ÿåº¦å¿«åˆ°çœ‹ä¸æ‡‚åœ¨å¹¹å˜›ï¼Œè€Œä¸”é‚„ä¸æœƒå‡ºéŒ¯ï¼Œå› ç‚ºåªè¦æƒ³å¥½è¦åšä»€éº¼ï¼ŒæŒ‰éµæŒ‰ä¸‹å»å°±å°äº†ï¼Œé€™ä¹Ÿæ˜¯ç‚ºä»€éº¼æœƒé«˜æ•ˆç‡ã€‚èªªäº†ä¸€å †ï¼Œåæ­£å°±æ˜¯ <del><strong>è€æ½®å¿…å‚™</strong></del>ã€‚</p>
<p>æœ¬ç¯‡å°‡æœƒæåˆ°:</p>
<ul>
<li><p>operator, text object, motion çš„é…åˆç”¨æ³•</p>
</li>
<li><p>å…§å»º text object çš„ä¸è¶³ä¹‹è™•</p>
</li>
<li><p>æ“´å…… text object çš„ plugin</p>
</li>
<li><p>æ·ºè«‡ nvim-treesitter </p>
<a id="more"></a>

</li>
</ul>
<h1 id="Operator-amp-text-object"><a href="#Operator-amp-text-object" class="headerlink" title="Operator &amp; text object"></a>Operator &amp; text object</h1><p>Vim å®šç¾©äº†å¤šå€‹ operator æœ€å¸¸ç”¨çš„å°±æ˜¯:</p>
<ul>
<li><code>d</code> delete (åˆªé™¤)</li>
<li><code>c</code> change (æ›´æ”¹)</li>
<li><code>y</code> yank (è¤‡è£½)</li>
</ul>
<p><strong>operator</strong> æ²’æœ‰é…åˆ text object æˆ–æ˜¯ motion æ˜¯æ²’æœ‰æ„ç¾©çš„ï¼Œæƒ³åƒä¸€ä¸‹ä½¿ç”¨äº† <code>d</code> åˆªé™¤ï¼Œä½†æ˜¯æ²’å‘Šè¨´å®ƒè¦åˆªé™¤ä»€éº¼ï¼Œå°±åƒæœ‰äº†éµéšä¸çŸ¥é“è¦æ‰“ä»€éº¼ã€‚æ‰€ä»¥éœ€è¦çµ¦ operator ä¸€å€‹ç›®æ¨™ï¼Œè®“å®ƒè¦å°èª°åšä»€éº¼ã€‚é€™å€‹èª°å°±æœ‰å…©ç¨®ï¼Œmotion å’Œ text objectã€‚</p>
<p><strong>motion</strong>ï¼šå…¶å¯¦å°±æ˜¯è·³è½‰æŒ‡ä»¤ï¼Œåƒæ˜¯å¸¸ç”¨çš„ <code>G</code>,<code>gg</code>, <code>w</code>, <code>f{char}</code> â€¦ ç­‰éƒ½å¯ä»¥é…åˆ operatorã€‚åŸºæœ¬ä½¿ç”¨æ–¹æ³•ç‚º <code>{operator}{motion}</code>ï¼Œèªæ„å°±æ˜¯åšé€™å€‹ operator å‹•ä½œåˆ° motion æ‰€åˆ°çš„åœ°æ–¹</p>
<p>ä»¥ <code>d</code> operator åšèˆ‰ä¾‹çš„è©± (å…¶ä»– operator ä»¥æ­¤é¡æ¨):</p>
<ul>
<li><code>dG</code>: åˆªé™¤ å¾æ¸¸æ¨™åˆ°æª”æ¡ˆçš„å°¾éƒ¨</li>
<li><code>dgg</code>: åˆªé™¤ å¾æ¸¸æ¨™åˆ°æª”æ¡ˆçš„é ­éƒ¨</li>
<li><code>dw</code>: åˆªé™¤ å¾æ¸¸æ¨™åˆ°ä¸‹ä¸€å€‹å­—</li>
<li><code>dfz</code>: åˆªé™¤ å¾æ¸¸æ¨™åº•ä¸‹åˆ°é”æ­¤è¡Œ z é€™å€‹å­—æ¯ (å¦‚æœæ­¤è¡Œç„¡ z å‰‡ä¸å‹•ä½œ)</li>
</ul>
<p><strong>text object</strong>ï¼š é€šå¸¸æ˜¯å·²ç¶“å®šç¾©çš„ä¸€å€‹ç¯„åœï¼Œåƒæ˜¯ word, quote, () block â€¦ ç­‰ã€‚å…§å»ºçš„ text object éƒ½æœƒæœ‰ i æˆ– a ç‚ºå‰è¼Ÿï¼Œi è¡¨ç¤º inside (ä¸åŒ…å«çš„æ¦‚å¿µ)ã€ a è¡¨ç¤º around (åŒ…å«çš„æ¦‚å¿µ)ã€‚</p>
<p>å¸¸ç”¨çš„ text object:</p>
<ul>
<li><code>iw</code> ï¼šæ¸¸æ¨™ä¸‹çš„å­—ä¸åŒ…å«å¾Œé¢çš„ç©ºç™½ (è‹±æ–‡æ–·å­—ä½¿ç”¨ç©ºç™½)</li>
<li><code>aw</code> ï¼šæ¸¸æ¨™ä¸‹çš„å­—åŒ…å«å¾Œé¢çš„ç©ºç™½ (è‹±æ–‡æ–·å­—ä½¿ç”¨ç©ºç™½)</li>
<li><code>i&quot;</code> ï¼šæ¸¸æ¨™ä¸‹åœ¨é›™å¼•è™Ÿè£¡çš„æ‰€æœ‰å­—ä¸åŒ…å«é›™å¼•è™Ÿ </li>
<li><code>a&quot;</code> ï¼šæ¸¸æ¨™ä¸‹åœ¨é›™å¼•è™Ÿè£¡çš„æ‰€æœ‰å­—åŒ…å«é›™å¼•è™Ÿ</li>
<li><code>i(</code>, <code>i)</code> ï¼šæ¸¸æ¨™ä¸‹åœ¨å°æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—ä¸åŒ…å«å°æ‹¬è™Ÿ</li>
<li><code>a(</code>, <code>a)</code> ï¼šæ¸¸æ¨™ä¸‹åœ¨å°æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—åŒ…å«å°æ‹¬è™Ÿ</li>
</ul>
<p>åŸºæœ¬ä½¿ç”¨æ–¹å¼ç‚º <code>{operator}{text object}</code>ï¼Œèªæ„å°±æ˜¯å°æ­¤ text object åšé€™å€‹operator å‹•ä½œ<br>ä½¿ç”¨ <code>d</code> operator åšèˆ‰ä¾‹:</p>
<ul>
<li><code>diw</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹çš„å­—ä¸åŒ…å«å¾Œé¢çš„ç©ºç™½ (è‹±æ–‡æ–·å­—ä½¿ç”¨ç©ºç™½)</li>
<li><code>daw</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹çš„å­—åŒ…å«å¾Œé¢çš„ç©ºç™½ (è‹±æ–‡æ–·å­—ä½¿ç”¨ç©ºç™½)</li>
<li><code>di&quot;</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹åœ¨é›™å¼•è™Ÿè£¡çš„æ‰€æœ‰å­—ä¸åŒ…å«é›™å¼•è™Ÿ </li>
<li><code>da&quot;</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹åœ¨é›™å¼•è™Ÿè£¡çš„æ‰€æœ‰å­—ä¸åŒ…å«é›™å¼•è™Ÿ</li>
<li><code>di(</code>, <code>di)</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹åœ¨å°æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—ä¸åŒ…å«é›™å¼•è™Ÿ</li>
<li><code>da(</code>, <code>da)</code> ï¼šåˆªé™¤ æ¸¸æ¨™ä¸‹åœ¨å°æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—åŒ…å«é›™å¼•è™Ÿ</li>
</ul>
<blockquote>
<p>å»ºè­°è‡ªå·±æŠŠ <code>:help motion.txt</code> ç¿»ä¸€ç¿»ï¼Œæ‰¾å‡ºè‡ªå·±å¸¸ç”¨çš„ text object çœ‹ä¸€çœ‹ï¼Œå¯«æˆä¸€å€‹ cheat sheet</p>
</blockquote>
<p>é›–ç„¶ vim å®šç¾©äº†å¤§é‡çš„ text objectï¼Œä½†å¯èƒ½å¤§éƒ¨åˆ†éƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œé‚£å°±é€é plugin ä¾†æ»¿è¶³éœ€æ±‚å§ã€‚</p>
<h1 id="ç°¡å–®å¥½ç”¨çš„-vim-textobj-user"><a href="#ç°¡å–®å¥½ç”¨çš„-vim-textobj-user" class="headerlink" title="ç°¡å–®å¥½ç”¨çš„ vim-textobj-user"></a>ç°¡å–®å¥½ç”¨çš„ vim-textobj-user</h1><p>kana æ‰€ç™¼å±•çš„ <a href="https://github.com/kana/vim-textobj-user" target="_blank" rel="noopener">kana/vim-textobj-user</a> æ˜¯ä¸€å€‹ libï¼Œè®“ä½¿ç”¨è€…è—‰ç”±é€™å€‹ lib è¼•é¬†çš„è£½ä½œå±¬æ–¼è‡ªå·±çš„  text objectï¼Œæ‰€ä»¥å°±æœ‰ä¸€äº› plugin åŸºæ–¼æ­¤ lib åšå‡ºæ›´å¤šçš„ text objectï¼Œé€™äº› plugin çš„åå­—é€šå¸¸éƒ½å« vim-textobj-xxx ã€‚</p>
<p>ä½¿ç”¨ plugin çš„æ–¹æ³•ç‚ºï¼š</p>
<ul>
<li>å®‰è£ <a href="https://github.com/kana/vim-textobj-user" target="_blank" rel="noopener">kana/vim-textobj-user</a></li>
<li>åœ¨ <a href="https://github.com/kana/vim-textobj-user/wiki" target="_blank" rel="noopener">wiki</a> è£¡æŸ¥çœ‹è‡ªå·±æ‰€éœ€çš„ text object pluginï¼Œä¸¦ä¸”å®‰è£</li>
</ul>
<p>èˆ‰ä¾‹ä¾†èªªï¼šæˆ‘æœ€å¸¸ç”¨çš„å…©å€‹ text object æ˜¯ comment å’Œ funtion parameterï¼Œæ‰€ä»¥æˆ‘é¸å®š  <a href="https://github.com/glts/vim-textobj-comment" target="_blank" rel="noopener">glts/vim-textobj-comment</a> å’Œ <a href="https://github.com/sgur/vim-textobj-parameter" target="_blank" rel="noopener">sgur/vim-textobj-parameter</a></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'kana/vim-textobj-user'</span></span><br><span class="line">Plug <span class="string">'glts/vim-textobj-comment'</span></span><br><span class="line">Plug <span class="string">'sgur/vim-textobj-parameter'</span></span><br></pre></td></tr></table></figure>
<p>vim-textobj-comment æä¾›äº†ï¼š</p>
<ul>
<li><code>ic</code>ï¼šcomment å…§å®¹</li>
<li><code>ac</code>ï¼šcomment å…§å®¹ + comment ç¬¦è™Ÿ</li>
</ul>
<p>vim-textobj-parameter æä¾›äº†ï¼š</p>
<ul>
<li><code>i,</code>ï¼šåƒæ•¸</li>
<li><code>a,</code>ï¼šåƒæ•¸ç¬¦è™Ÿ + åˆ†éš”ç¬¦è™Ÿ (ä¹Ÿå°±æ˜¯é€—è™Ÿ)</li>
</ul>
<h1 id="æ›´ç´°è†©çš„-text-object-targets-vim"><a href="#æ›´ç´°è†©çš„-text-object-targets-vim" class="headerlink" title="æ›´ç´°è†©çš„ text object - targets.vim"></a>æ›´ç´°è†©çš„ text object - targets.vim</h1><p><a href="https://github.com/wellle/targets.vim" target="_blank" rel="noopener">wellle/targets.vim</a> æŠŠ text object çš„ç¨®é¡æ‹†æˆå››é¡å‹ï¼š</p>
<ul>
<li>Pair text objects - <code>(</code> <code>)</code> <code>{</code> <code>}</code> <code>[</code> <code>]</code> <code>&lt;</code> <code>&gt;</code> </li>
<li>Quote text objects -  <code>&#39;</code> <code>&quot;</code> <code>`</code></li>
<li>Separator text objects - <code>, . ; : + - = ~ _ * # / | \ &amp; $</code></li>
<li>Argument text objects</li>
<li>Tag text objects</li>
</ul>
<p>Pair å’Œ Quote text objects æ˜¯ vim åŸæœ¬å°±æœ‰çš„æ¦‚å¿µï¼ŒSeparator text objects å¦‚å…¶åï¼Œå…©å€‹ separator ä¹‹é–“çš„å­—å°±æ˜¯ Separator text objects äº†ã€‚<br>èˆ‰å€‹ä½¿ç”¨æƒ…å¢ƒï¼šurl GET åƒæ•¸éƒ½ç”¨ <code>&amp;</code> æ‰€éš”é–‹ï¼Œå¦‚æœæƒ³åˆªé™¤ <code>&amp;</code> ä¹‹é–“çš„å­—é‚£å°±ç”¨å¾—ä¸Šäº†</p>
<p>å…§å»ºçš„ text object ä½¿ç”¨äº† i å’Œ a åšå‰è¼Ÿï¼Œè€Œ targets.vim æ›´ç‚ºç´°è†©ï¼Œæä¾›äº†é¡å¤–çš„ I å’Œ A æ“´å……åŸæœ¬çš„ i å’Œ aï¼Œå†åŠ ä¸Šä¸€å±¤æ¦‚å¿µ <code>n</code> å’Œ <code>l</code>ï¼Œ<code>n</code> ä»£è¡¨ä¸‹ä¸€å€‹ï¼Œ<code>l</code> å‰‡ä»£è¡¨ä¸Šä¸€å€‹ã€‚</p>
<p>è¨»ï¼šå…§å»ºçš„ text object éƒ½æ˜¯ä»¥æ¸¸æ¨™ä½ç½®ç‚ºæº–ï¼Œæ²’ä¸Šä¸€å€‹å’Œä¸‹ä¸€å€‹çš„æ¦‚å¿µ</p>
<p>ä»¥ <code>)</code> åšå€‹èˆ‰ä¾‹ï¼š</p>
<ul>
<li><code>i)</code>ï¼šåŒ…å«æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—</li>
<li><code>I)</code>ï¼šåŒ…å«æ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—ï¼Œä½†æ‹¬è™Ÿè£¡å…©é‚Šçš„ç©ºç™½ä¸åŒ…å«</li>
<li><code>a)</code>ï¼šåŒ…å«æ‹¬è™Ÿå’Œæ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—</li>
<li><code>A)</code>ï¼šåŒ…å«æ‹¬è™Ÿå’Œæ‹¬è™Ÿè£¡çš„æ‰€æœ‰å­—é‚„æœ‰å…©é‚Šæ‹¬è™Ÿå¤–çš„ç©ºç™½</li>
</ul>
<p>åŠ ä¸Š <code>n</code> å’Œ <code>l</code> çš„è©±å°±æ˜¯ä¸‹ä¸€å€‹è·Ÿä¸Šä¸€å€‹</p>
<p><code>.</code> è¡¨ç¤ºæ¸¸æ¨™æ‰€åœ¨ä½ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                           ..........</span><br><span class="line">a ( b ( cccccccc ) d ) ( e ( ffffff ) g ) ( h ( iiiiiiii ) j ) k</span><br><span class="line">  â”‚â”‚â”‚ â”‚â”‚â”” 2Il) â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”‚â”‚â”” I) â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”‚â”‚â”” 2In) â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚</span><br><span class="line">  â”‚â”‚â”‚ â”‚â””â”€ 2il) â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”‚â””â”€ i) â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”‚â””â”€ 2in) â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚</span><br><span class="line">  â”‚â”‚â”‚ â”œâ”€â”€ 2al) â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”œâ”€â”€ a) â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â”œâ”€â”€ 2an) â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚</span><br><span class="line">  â”‚â”‚â”‚ â””â”€â”€ 2Al) â”€â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â””â”€â”€ A) â”€â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â”‚â”‚ â””â”€â”€ 2An) â”€â”€â”€â”˜â”‚â”‚â”‚â”‚</span><br><span class="line">  â”‚â”‚â””â”€â”€â”€â”€â”€ Il) â”€â”€â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â””â”€â”€â”€ 2I) â”€â”€â”€â”€â”˜â”‚â”‚â”‚â”‚â”‚â””â”€â”€â”€â”€â”€ In) â”€â”€â”€â”€â”˜â”‚â”‚â”‚</span><br><span class="line">  â”‚â””â”€â”€â”€â”€â”€â”€ il) â”€â”€â”€â”€â”€â”˜â”‚â”‚â”‚â””â”€â”€â”€â”€ 2i) â”€â”€â”€â”€â”€â”˜â”‚â”‚â”‚â””â”€â”€â”€â”€â”€â”€ in) â”€â”€â”€â”€â”€â”˜â”‚â”‚</span><br><span class="line">  â”œâ”€â”€â”€â”€â”€â”€â”€ al) â”€â”€â”€â”€â”€â”€â”˜â”‚â”œâ”€â”€â”€â”€â”€ 2a) â”€â”€â”€â”€â”€â”€â”˜â”‚â”œâ”€â”€â”€â”€â”€â”€â”€ an) â”€â”€â”€â”€â”€â”€â”˜â”‚</span><br><span class="line">  â””â”€â”€â”€â”€â”€â”€â”€ Al) â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€ 2A) â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€ An) â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>target.vim æä¾›çš„ text object å¯¦åœ¨å¤ªå¤šå¤ªè¤‡é›œï¼Œæ‰€ä»¥å¾ˆè²¼å¿ƒçš„åšäº† <a href="https://github.com/wellle/targets.vim/blob/master/cheatsheet.md" target="_blank" rel="noopener">cheat sheet</a></p>
<h1 id="syntax-ç›¸é—œ-text-object"><a href="#syntax-ç›¸é—œ-text-object" class="headerlink" title="syntax ç›¸é—œ text object"></a>syntax ç›¸é—œ text object</h1><p>ä»¥ä¸Šæ‰€æåˆ°çš„ text object éƒ½æ˜¯å’Œç¨‹å¼èªè¨€è¼ƒç„¡ç›¸é—œçš„ text objectã€‚ç¨‹å¼èªè¨€ç›¸é—œçš„ text objectï¼Œæ¯”å¦‚èªª function, class, structureâ‹¯â‹¯ï¼Œé€™äº›ç›¸é—œçš„ text object plugin ç›¸å°ä¾†èªªæ¯”è¼ƒå°‘è¦‹ã€‚</p>
<p>vim ä¸¦æ²’æœ‰æä¾›ä¸€å€‹ä»‹é¢ç›´æ¥æ‹¿å– syntax tree çš„æŸä¸€å€‹ nodeï¼Œæ‰€ä»¥ç¾åœ¨çš„æ‰€æœ‰ text object çš„ plugin éƒ½æ˜¯é  regex æˆ–æ˜¯å…¶ä»–å­—ä¸²æ¯”å°çš„æ–¹å¼ã€‚å‡å¦‚æƒ³è¦ä¸€å€‹ function çš„ text objectï¼Œå°±å¿…é ˆåœ¨æ¯ç¨®èªè¨€éƒ½ç”¨ regex æˆ–å­—ä¸²æ¯”å°åšä¸€éï¼Œç›¸ç•¶çš„éº»ç…©ï¼Œ<a href="https://github.com/kana/vim-textobj-function" target="_blank" rel="noopener">kana/vim-textobj-function</a> å°±æ˜¯ä¸€å€‹ä¾‹å­ï¼Œç›®å‰åªæä¾›ä¸‰ç¨®èªè¨€ï¼Œä¸¦ä¸”æ¯ç¨®èªè¨€å¯¦åšä¸€æ¬¡ã€‚</p>
<p>ä¸€å€‹ text object ç‚ºä¸»çš„ plugin æƒ³è¦é›†æˆæ‰€æœ‰çš„ syntax ç›¸é—œ text object è®Šå¾—ä¸å¤ªå¯èƒ½ï¼Œæ‰€ä»¥é€™äº› syntax ç›¸é—œ text object plugin é€šå¸¸éƒ½å·²ä¸€ç¨®èªè¨€ç‚ºä¸»ï¼Œæˆ–æ˜¯é™„å±¬åœ¨æŸäº›èªè¨€ plugin åº•ä¸‹ï¼š</p>
<ul>
<li>vim-go æä¾›äº† comment (<code>ac</code>, <code>ic</code>) å’Œ function (<code>af</code>, <code>if</code>) text object</li>
<li><a href="https://github.com/sgur/vim-textobj-parameter" target="_blank" rel="noopener">sgur/vim-textobj-parameter</a> ç‚º python syntax ç›¸é—œçš„ text object</li>
<li><a href="https://github.com/mjbrownie/django-template-textobjects" target="_blank" rel="noopener">mjbrownie/django-template-textobjects</a> ç‚º django-template ç›¸é—œçš„ text object</li>
</ul>
<h1 id="æ•‘ä¸–ä¸»-treesitter"><a href="#æ•‘ä¸–ä¸»-treesitter" class="headerlink" title="æ•‘ä¸–ä¸» treesitter"></a>æ•‘ä¸–ä¸» treesitter</h1><p>ä¸€å€‹ text object ç‚ºä¸»çš„ plugin æƒ³è¦é›†æˆæ‰€æœ‰çš„ syntax ç›¸é—œ text object çœŸçš„ä¸å¯èƒ½é”åˆ°å—ï¼Ÿ<br>ç­‰åˆ° Treesitter è¢« neovim æ•´åˆå®Œæˆå¾Œä¸€åˆ‡å°‡è®Šå¾—ç°¡å–®è¨±å¤šã€‚</p>
<p>Treesitter ç°¡å–®ä¾†è¬›å°±æ˜¯å€‹ parserï¼Œå¯ä»¥ä½¿ç”¨å®ƒå»ºç«‹ syntax treeï¼Œå®˜æ–¹ä»‹ç´¹å¦‚ä¸‹ï¼š<br>Tree-sitter is a parser generator tool and an incremental parsing library. It can build a concrete syntax tree for a source file and efficiently update the syntax tree as the source file is edited</p>
<p>neovim 0.5 ç‰ˆçš„ç›®æ¨™å°±æ˜¯è¦å°‡ treesitter æ•´åˆï¼Œå®Œæˆä¹‹å¾Œå°‡å¯åœ¨ neovim è£¡ä½¿ç”¨ treesitter ç›¸é—œçš„ apiï¼Œæ‹¿åˆ°äº† syntax treeï¼Œ è¦æŠ“åˆ° text object è®Šå¾—å®¹æ˜“è¨±å¤šã€‚åˆ¥èªªåš text object plugin äº†ï¼Œé€£ syntax highlight, code folding ç­‰ç›¸é—œ plugin éƒ½å¯ä»¥ä¸éœ€å€šè³´ regex ï¼Œè€Œç›®å‰å·²ç¶“æœ‰åŸºæ–¼ treesitter çš„ plugin äº†ï¼š<br><strong><a href="https://github.com/nvim-treesitter/nvim-treesitter" target="_blank" rel="noopener">nvim-treesitter/nvim-treesitter</a></strong></p>
<p>è©³è¦‹ <code>:help treesitter-parsers</code></p>
<h1 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h1><p><a href="https://github.com/wellle/targets.vim" target="_blank" rel="noopener">wellle/targets.vim</a> å’Œ <a href="https://github.com/kana/vim-textobj-user" target="_blank" rel="noopener">kana/vim-textobj-user</a> åœ¨é–‹ç™¼ä¸Šä½¿ç”¨æˆªç„¶ä¸åŒçš„æ–¹å¼ï¼Œå‰è€…å®šç¾©å¥½å¤§é‡ç´°è†©çš„ text objectï¼Œå¾Œè€…å‰‡æ˜¯ä¸€å€‹ libï¼Œç”±ä½¿ç”¨è€…ä»¥æ­¤ lib ç‚ºåŸºç¤åœ¨é–‹ç™¼ pluginã€‚</p>
<p>å°æˆ‘ä¾†èªªï¼Œå…§å»ºçš„ text object å·²ç¶“è¶³å¤ å¼·å¤§å¹¾ä¹æ»¿è¶³éœ€æ±‚ï¼Œåªéœ€è¦åœ¨åšä¸€é»è£œå¼·ï¼Œåƒæ˜¯å¸¸ç”¨çš„ comment å’Œ funtion parameter å°±æ²’æœ‰è¢« vim å®šç¾©ã€‚è€Œ target.vim å¤§é‡ç´°è†©çš„ text object ä½¿ç”¨æƒ…å¢ƒéƒ½æ¯”è¼ƒç‰¹æ®Šï¼Œæ‰€ä»¥æˆ‘å°±é¸æ“‡äº† vim-textobj-user é™£ç‡Ÿâ€”â€”åªé¸æ“‡è‡ªå·±æ‰€éœ€è¦çš„å®‰è£ï¼Œä¸æœƒæœ‰å¤šé¤˜çš„åŠŸèƒ½ã€‚</p>
<p><a href="https://github.com/nvim-treesitter/nvim-treesitter" target="_blank" rel="noopener">nvim-treesitter/nvim-treesitter</a> å€šè³´ syntax tree è§£æ±ºäº†ä½¿ç”¨ regex é–‹ç™¼ text object plugin çš„éº»ç…©ï¼Œè€Œä¸”æ›´ç²¾æº–ï¼Œå¯ä»¥é è¦‹ neovim 0.5 å®Œæˆå¾Œçš„æœªä¾†ï¼Œsyntax ç›¸é—œçš„ text object plugin å°‡æœƒè¢«æ­¤ plugin çµ±ä¸€ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://codeinthehole.com/tips/vim-text-objects/" target="_blank" rel="noopener">https://codeinthehole.com/tips/vim-text-objects/</a></li>
<li><a href="https://www.tandrewnichols.me/motions-operators-text-objects-introduction/" target="_blank" rel="noopener">https://www.tandrewnichols.me/motions-operators-text-objects-introduction/</a></li>
<li><a href="https://neovim.io/doc/user/motion.html" target="_blank" rel="noopener"><code>:help &#39;motion.txt&#39;</code></a></li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
        <tag>neovim</tag>
      </tags>
  </entry>
  <entry>
    <title>Golang 78 èªæ³•ç¯‡ - method set</title>
    <url>/2020/07/07/golang78syntax2/</url>
    <content><![CDATA[<p><code>method set</code>, <code>interface</code>, <code>auto deference or reference</code> ç•¶é€™äº›èªæ³•ç¶œåˆå†ä¸€èµ·ä½¿ç”¨æ™‚ï¼Œå¾ˆå®¹æ˜“æ··æ·†ï¼Œç”šè‡³å¯«å‡º bug codeï¼Œé€™ç« æˆ‘å€‘å°±é€éé¡Œç›®æ¢è¨ä¸€ä¸‹ <code>method set</code> å¸¸å¸¸è¢«å¤§å®¶èª¤æœƒçš„åœ°æ–¹ã€‚</p>
<a href="/2020/07/03/golang78syntax/" title="Golang 78 èªæ³•ç¯‡ - interface">Golang 78 èªæ³•ç¯‡ - interface</a> Line 50 ç”¨åˆ°çš„æ¦‚å¿µå°±åœ¨é€™ç¯‡ã€‚


<h1 id="é¡Œç›®"><a href="#é¡Œç›®" class="headerlink" title="é¡Œç›®"></a>é¡Œç›®</h1><p>è«‹å•ä»¥ä¸‹ç¨‹å¼è¼¸å‡ºçµæœç‚ºä½•</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e Employee)</span> <span class="title">DoWork</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"do work"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	(&amp;Employee&#123;&#125;).DoWork()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç­”æ¡ˆåªæœ‰å…©ç¨®æ–¹å‘:<br>    1. ç„¡æ³•ç·¨è­¯<br>    2. å°å‡º do work</p>
<p>é€™å€‹ç¨‹å¼å¯ä»¥ç·¨è­¯ï¼Œä¸¦ä¸”é‚„å°å‡º do work ä½†æ˜¯ç‚ºä»€éº¼å‘¢ï¼Ÿ</p>
 <a id="more"></a>

<h1 id="Method-set"><a href="#Method-set" class="headerlink" title="Method set"></a>Method set</h1><p>åœ¨ receiver argument å’Œ receiver parameter ä¸ä¸€æ¨£çš„æƒ…æ³ä¸‹ï¼Œç›´è¦ºåæ‡‰å°±æ˜¯ <code>implicit dereference</code> å’Œ <code>implicit reference</code> åœ¨èƒŒå¾Œæœƒå¹«å¿™ï¼Œä½†æ˜¯é€™å€‹å¯«æ³• (struct literal) æ˜¯ä¸æœƒæœ‰æ­¤æƒ…æ³çš„ã€‚</p>
<p>æ—¢ç„¶æ²’æœ‰ <code>implicit dereference</code> å’Œ <code>implicit reference</code> çš„æ”¯æ´ï¼Œé‚£ä¸€å®šå­˜åœ¨å…¶å®ƒæ©Ÿåˆ¶ä½¿å¾—é€™æ®µ code èƒ½æ­£å¸¸ç·¨è­¯ã€‚</p>
<p>ä»¥ä¸‹å¾ <a href="https://golang.org/ref/spec#Method_sets" target="_blank" rel="noopener">Golang Specification</a>æ‰€æˆªå–çš„å¥å­:</p>
<p>The method set of the corresponding pointer type *T is the set of all methods declared with receiver *T or T (that is, it also contains the method set of T)</p>
<p>ä»¥ä¸‹æ˜¯å¾ <a href="https://golang.org/doc/faq#different_method_sets" target="_blank" rel="noopener">Golang FAQ</a> æ‰€æˆªå–çš„å¥å­:</p>
<p>As the Go specification says, the method set of a type T consists of all methods with receiver type T, while that of the corresponding pointer type *T consists of all methods with receiver *T or T. That means the method set of *T includes that of T, but not the reverse</p>
<p>å…¶å¯¦æ„æ€å°±æ˜¯å‹æ…‹ T çš„æ‰€æœ‰ method åŒ…å«äº†æ‰€æœ‰ receiver å‹æ…‹æ˜¯ T çš„ methodï¼Œé€™ç†æ‰€ç•¶ç„¶ï¼Œçœ‹èµ·ä¾†ä¹Ÿåƒå»¢è©±ï¼Œå¦ä¸€å¥æ‰æ˜¯é—œéµï¼Œä¹Ÿæ˜¯ä»Šæ—¥çš„é‡é»ï¼š*T å‹æ…‹çš„æ‰€æœ‰ method åŒ…å«äº† receiver å‹æ…‹æ˜¯ T åŠ *T çš„ methodã€‚</p>
<p>æœ‰äº†æ­¤çµè«–æˆ‘å€‘å°±èƒ½çŸ¥é“ <code>*Employee</code> çš„ method set è£¡æ˜¯æœ‰ <code>DoWork()</code>ï¼Œæ‰€ä»¥ç·¨è­¯æœƒéã€‚</p>
<p>é‚£é€™å°±æœ‰è¶£äº†ï¼Œå†çœ‹ä¸€å€‹å»¶ä¼¸é¡Œï¼Œè«‹å•é€™æ®µ code ç·¨è­¯æœƒä¸æœƒé:</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Worker <span class="keyword">interface</span> &#123;</span><br><span class="line">	DoWork()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e Employee)</span> <span class="title">DoWork</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"do work"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> w Worker = &amp;Employee&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€™æ®µ code å•çš„å…¶å¯¦å°±æ˜¯ Employee åˆ°åº•æœ‰æ²’æœ‰ç¬¦åˆ(satisfy) <code>Worker</code> ä»‹é¢ï¼Œæ ¹æ“šå‰›å‰›æ‰€å¾—å‡ºçš„çµè«–ï¼Œ <code>*Employee</code> çš„ method set è£¡æ˜¯æœ‰åŒ…å« <code>DoWork</code> çš„ï¼Œæ‰€ä»¥ç·¨è­¯æ˜¯æœƒéçš„ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol>
<li><a href="https://golang.org/doc/faq#different_method_sets" target="_blank" rel="noopener">Golang Frequently Asked Questions (FAQ)</a></li>
<li><a href="https://golang.org/ref/spec#Method_sets" target="_blank" rel="noopener">The Go Programming Language Specification - Method sets</a></li>
</ol>
]]></content>
      <categories>
        <category>golang78 syntax series</category>
      </categories>
      <tags>
        <tag>golang</tag>
      </tags>
  </entry>
  <entry>
    <title>vim é«˜äº® yank å€åŸŸ</title>
    <url>/2020/09/29/vim-tips-highlight-yank-region/</url>
    <content><![CDATA[<p><code>y</code> æ˜¯åœ¨ vim è£¡æœ€å¸¸ä½¿ç”¨çš„ä½¿ç”¨çš„ operator ä¹‹ä¸€ï¼Œä½¿ç”¨ <code>y</code> operator å°‡æœƒåŸ·è¡Œ yank å‹•ä½œï¼Œä½†å®ƒç„¡æ³•åƒ <code>c</code> (change) å’Œ <code>d</code> (delete) operator ä½¿ç”¨ä¹‹å¾Œé¦¬ä¸Šå°±çŸ¥é“å°æ–‡ä»¶ç·¨è¼¯äº†ä»€éº¼ã€‚yank å‹•ä½œæ˜¯æ²’æœ‰åé¥‹çš„ï¼ŒæŒ‰äº† <code>yiw</code> è¤‡è£½ word ä¹‹å¾Œï¼Œä½ ä¹Ÿç„¡æ³•ç¢ºå®šæ˜¯ä¸æ˜¯æŒ‰å°äº†ï¼Œé‚„è¦ä½¿ç”¨ <code>:reg</code> æª¢è¦–ï¼Œé —éº»ç…©çš„ã€‚</p>
<p>è§£æ±ºæ–¹æ¡ˆï¼šåœ¨ä½¿ç”¨ yank operator ä¹‹å¾Œï¼Œé«˜äº®è¤‡è£½å€åŸŸçŸ­æš«çš„æ™‚é–“ï¼Œå°±èƒ½ç¢ºèªè¤‡è£½çš„å€åŸŸæœ‰æ²’æœ‰èª¤ã€‚ä»¥ä¸‹åœ–ä¾‹ç‚ºï¼Œåœ¨ 23 è¡ŒæŒ‰ä¸‹ <code>yy</code>, åœ¨ 24 è¡Œçš„ return ä¸ŠæŒ‰ä¸‹ <code>yiw</code></p>
<img data-src="/2020/09/29/vim-tips-highlight-yank-region/cover.gif" class="">
 <a id="more"></a>

<p>åœ¨ neovim 0.5 è£¡é”åˆ°é€™ä»¶äº‹ç›¸ç•¶ç°¡å–®ï¼ŒæŠŠä»¥ä¸‹åŠ è¿‘</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">autocmd</span> TextYankPost * silent! <span class="keyword">lua</span> <span class="keyword">vim</span>.<span class="keyword">highlight</span>.on_yank&#123;higroup=<span class="string">"IncSearch"</span>, timeout=<span class="number">300</span>&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯ä½¿ç”¨ vim ä¹Ÿå¯ä»¥ç”¨ <a href="https://github.com/machakann/vim-highlightedyank" target="_blank" rel="noopener">vim-highlightedyank</a> å¥—ä»¶é”æˆ</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">Plug <span class="string">'machakann/vim-highlightedyank'</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:highlightedyank_highlight_duration</span> = <span class="number">300</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">'##TextYankPost'</span>)</span><br><span class="line">  <span class="keyword">map</span> <span class="keyword">y</span> <span class="symbol">&lt;Plug&gt;</span>(highlightedyank)</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li><a href="https://github.com/neovim/neovim/pull/12279" target="_blank" rel="noopener">https://github.com/neovim/neovim/pull/12279</a></li>
<li>neovim <code>:help lua-highlight</code></li>
</ul>
]]></content>
      <tags>
        <tag>vim</tag>
        <tag>neovim</tag>
      </tags>
  </entry>
</search>
